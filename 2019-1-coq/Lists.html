<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="common/css/sf.css" rel="stylesheet" type="text/css" />
<title>Lists</title>
</head>
<link href="common/jquery-ui/jquery-ui.css" rel="stylesheet">
<script src="common/jquery-ui/external/jquery/jquery.js"></script>
<script src="common/jquery-ui/jquery-ui.js"></script>
<script src="common/toggleproofs.js"></script>
<link href="common/css/lf.css" rel="stylesheet" type="text/css"/>

<body>

<div id="page">

<div id="header">
<a href="https://github.com/hengxin/problem-solving-class-coq">
<img src="common/media/image/sf_logo_sm.png"></a>
<br><span class="booktitleinheader">Volume 1: é€»è¾‘åŸºç¡€</span><br><br>
<ul id="menu">
   <a href="toc.html"><li class="section_name">ç›®å½•</li></a>
   <a href="deps.html"><li class="section_name">è·¯çº¿</li></a>
</ul>
</div>


<div id="main">

<h1 class="libtitle">Library Lists</h1>

<div class="code code-tight">
</div>

<div class="doc">
<a name="lab61"></a><h1 class="section">Lists: åŸºæœ¬æ•°æ®ç±»å‹</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  æœ¬èŠ‚ä»‹ç» <b>åˆ—è¡¨</b> (List) æ•°æ®ç±»å‹ã€‚
  ä¸‹é¢ä¸¤èŠ‚ä»‹ç» <b>å‡½æ•°å¼ç¨‹åºè®¾è®¡</b> (Functional Programming; FP) èŒƒå‹ã€‚

<div class="paragraph"> </div>

  ä¸ºä»€ä¹ˆè¦å…ˆä»‹ç»åˆ—è¡¨å‘¢?
  å› ä¸ºåˆ—è¡¨æ˜¯å‡½æ•°å¼ç¨‹åºè®¾è®¡ä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ã€‚
  æœ€æ—©çš„å‡½æ•°å¼ç¨‹åºè®¾è®¡è¯­è¨€ä¹‹ä¸€ Lisp çš„å«ä¹‰å³æ˜¯ "LISt Processor"ã€‚

<div class="paragraph"> </div>

  é™¤äº†åˆ—è¡¨ï¼Œæœ¬èŠ‚è¿˜å°†ä»‹ç»è®¡ç®—æœºç§‘å­¦ä¸­æœ€å¸¸è§ã€æœ€æ¼‚äº®çš„æ•°æ®ç±»å‹: 
  <b>æ ‘</b> (Tree ğŸŒ²)ã€‚
  "Trees sprout up just about everywhere in computer science.
 Donald Knuth"

<div class="paragraph"> </div>

  (åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ ‘çš„æ ¹åœ¨é¡¶éƒ¨ï¼Œå¶å­åœ¨åº•éƒ¨ï¼Œ
  è¿™æ˜¯è®¡ç®—æœºç§‘å­¦å¯¹è‡ªç„¶ç§‘å­¦ä½œå‡ºçš„å·¨å¤§è´¡çŒ®ã€‚)

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  æœ¬èŠ‚ä¾èµ–äº <span class="inlinecode"><span class="id" type="var">Induction.v</span></span> (ä½ éœ€è¦å…ˆé˜…è¯»å®ƒ)ã€‚
  ä½ éœ€è¦å…ˆç¼–è¯‘ <span class="inlinecode"><span class="id" type="var">Induction.v</span></span> å¾—åˆ° <span class="inlinecode"><span class="id" type="var">Induction.vo</span></span>ã€‚
  ç¼–è¯‘æ–¹æ³•ï¼šåœ¨ CoqIDE ä¸­æ‰“å¼€ <span class="inlinecode"><span class="id" type="var">Induction.v</span></span>ï¼Œ
  æ‰§è¡Œ "Compile" èœå•ä¸­çš„ "Compile Buffer" å‘½ä»¤ã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">From</span> <span class="id" type="var">LF</span> <span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <span class="id" type="keyword">Induction</span>.<br/>
<span class="id" type="keyword">Module</span> <span class="id" type="var">NatList</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab62"></a><h1 class="section">è‡ªç„¶æ•°åºå¯¹</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  åœ¨å®šä¹‰åˆ—è¡¨æ•°æ®ç±»å‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçƒ­çƒ­èº«ï¼Œ
  å®šä¹‰ç®€å•çš„è‡ªç„¶æ•° <b>åºå¯¹</b> (Ordered Pair)ã€‚
  å®ƒåªæœ‰ä¸€ç§æ„é€ æ–¹å¼ï¼Œå³å°†æ„é€ å‡½æ•° <span class="inlinecode"><span class="id" type="var">pair</span></span> ä½œç”¨åˆ°ä¸¤ä¸ªè‡ªç„¶æ•° <span class="inlinecode"><span class="id" type="var">n1</span></span> <span class="inlinecode"><span class="id" type="var">n2</span></span> ä¸Šã€‚ 

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Inductive</span> <span class="id" type="var">natprod</span> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id" type="var">pair</span> (<span class="id" type="var">n1</span> <span class="id" type="var">n2</span> : <span class="id" type="var">nat</span>).<br/>

<br/>
</div>

<div class="doc">
  æ³¨æ„: æˆ‘ä»¬å°†è¯¥ç±»å‹å‘½åä¸º natprodï¼Œ
  å…¶ä¸­ prod è¡¨ç¤º <b>ä¹˜ç§¯</b> (Product) ç±»å‹ã€‚

</div>
<div class="code code-tight">
<span class="id" type="keyword">Check</span> (<span class="id" type="var">pair</span> 3 5).<br/>

<br/>
</div>

<div class="doc">
å‡½æ•° <span class="inlinecode"><span class="id" type="var">fst</span></span> ä¸ <span class="inlinecode"><span class="id" type="var">snd</span></span> åˆ†åˆ«ç”¨äºæå–æœ‰åºå¯¹çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªåˆ†é‡ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">fst</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">pair</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> =&gt; <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">snd</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">pair</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> =&gt; <span class="id" type="var">y</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Compute</span> (<span class="id" type="var">fst</span> (<span class="id" type="var">pair</span> 3 5)).<br/>

<br/>
</div>

<div class="doc">
åœ¨æ•°å­¦ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨ <span class="inlinecode">(<span class="id" type="var">x</span>,<span class="id" type="var">y</span>)</span> è¡¨ç¤ºæœ‰åºå¯¹ <span class="inlinecode"><span class="id" type="var">pair</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span>ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Notation</span> &quot;( x , y )" := (<span class="id" type="var">pair</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>).<br/>

<br/>
<span class="id" type="keyword">Compute</span> (<span class="id" type="var">fst</span> (3,5)).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">fst'</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| (<span class="id" type="var">x</span>,<span class="id" type="var">y</span>) =&gt; <span class="id" type="var">x</span> <br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">snd'</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| (<span class="id" type="var">x</span>,<span class="id" type="var">y</span>) =&gt; <span class="id" type="var">y</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">swap_pair</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">natprod</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| (<span class="id" type="var">x</span>,<span class="id" type="var">y</span>) =&gt; (<span class="id" type="var">y</span>,<span class="id" type="var">x</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
  ç”±äº <span class="inlinecode"><span class="id" type="var">natprod</span></span> ä¹Ÿæ˜¯å½’çº³ç±»å‹ (ä½¿ç”¨ Inductive å®šä¹‰)ï¼Œ
  å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> å¯¹ <span class="inlinecode"><span class="id" type="var">natprod</span></span> ç±»å‹çš„å€¼åˆ†æƒ…å½¢è®¨è®ºã€‚
  åˆç”±äº <span class="inlinecode"><span class="id" type="var">natprod</span></span> åªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•° <span class="inlinecode"><span class="id" type="var">pair</span></span>ï¼Œ
  å› æ­¤ä½¿ç”¨ <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> æ—¶åªä¼šäº§ç”Ÿä¸€ä¸ªå­ç›®æ ‡ã€‚
  å¦å¤–ï¼Œ<span class="inlinecode"><span class="id" type="var">pair</span></span> æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ
  æ‰€ä»¥å¯ä»¥ä½¿ç”¨ <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> çš„ <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode">[<span class="id" type="var">f</span></span> <span class="inlinecode"><span class="id" type="var">s</span>]</span> å­å¥
  åŒ¹é…å¹¶è®°å½•æœ‰åºå¯¹çš„ä¸¤ä¸ªåˆ†é‡ã€‚ 

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">surjective_pairing</span> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">p</span> = (<span class="id" type="var">fst</span> <span class="id" type="var">p</span>, <span class="id" type="var">snd</span> <span class="id" type="var">p</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">p</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">m</span>]. &nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab63"></a><h4 class="section">ç»ƒä¹ ï¼š1 æ˜Ÿ, standard (snd_fst_is_swap)</h4>

</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">snd_fst_is_swap</span> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>),<br/>
&nbsp;&nbsp;(<span class="id" type="var">snd</span> <span class="id" type="var">p</span>, <span class="id" type="var">fst</span> <span class="id" type="var">p</span>) = <span class="id" type="var">swap_pair</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab64"></a><h4 class="section">ç»ƒä¹ ï¼š1 æ˜Ÿ, standard, optional (fst_swap_is_snd)</h4>

</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">fst_swap_is_snd</span> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">fst</span> (<span class="id" type="var">swap_pair</span> <span class="id" type="var">p</span>) = <span class="id" type="var">snd</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab65"></a><h1 class="section">è‡ªç„¶æ•°åˆ—è¡¨</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  ç”±ä»»æ„å¤šä¸ªè‡ªç„¶æ•°æ„æˆçš„ <b>è‡ªç„¶æ•°åˆ—è¡¨</b> ç±»å‹
  éœ€è¦ä½¿ç”¨é€’å½’æ¥å®šä¹‰ã€‚

<div class="paragraph"> </div>

  ä¸€ä¸ªè‡ªç„¶æ•°åˆ—è¡¨æœ‰ä¸”ä»…æœ‰ä¸¤ç§æ„é€ æ–¹å¼:
<ul class="doclist">
<li> ç©ºåˆ—è¡¨æ˜¯è‡ªç„¶æ•°åˆ—è¡¨ï¼Œè®°ä¸º <span class="inlinecode"><span class="id" type="var">nil</span></span>;

</li>
<li> å¦‚æœ <span class="inlinecode"><span class="id" type="var">l</span></span> æ˜¯è‡ªç„¶æ•°åˆ—è¡¨ï¼Œ<span class="inlinecode"><span class="id" type="var">n</span></span> æ˜¯è‡ªç„¶æ•°ï¼Œ
    æŠŠ <span class="inlinecode"><span class="id" type="var">n</span></span> æ·»åŠ åˆ° <span class="inlinecode"><span class="id" type="var">l</span></span> çš„è¡¨å¤´ï¼Œå¯ä»¥æ„æˆæ–°çš„åˆ—è¡¨ï¼Œè®°ä¸º <span class="inlinecode"><span class="id" type="var">cons</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">l</span></span>ã€‚

</li>
</ul>

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Inductive</span> <span class="id" type="var">natlist</span> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">cons</span> (<span class="id" type="var">n</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>).<br/>

<br/>
</div>

<div class="doc">
ä¾‹å¦‚ï¼Œ<span class="inlinecode"><span class="id" type="var">mylist</span></span> æ˜¯ä¸€ä¸ªä¸‰å…ƒç´ åˆ—è¡¨ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">mylist</span> := <span class="id" type="var">cons</span> 1 (<span class="id" type="var">cons</span> 2 (<span class="id" type="var">cons</span> 3 <span class="id" type="var">nil</span>)).<br/>

<br/>
</div>

<div class="doc">
  å¯¹äºè¾ƒé•¿çš„åˆ—è¡¨ï¼Œè¦å†™å¾ˆå¤šçš„ <span class="inlinecode"><span class="id" type="var">cons</span></span> ä¸æ‹¬å·ï¼Œç¹çæ˜“é”™ã€‚
  ä»¥ä¸‹ä¸‰ä¸ª <span class="inlinecode"><span class="id" type="keyword">Notation</span></span> å£°æ˜å…è®¸æˆ‘ä»¬:
<ul class="doclist">
<li> ä½¿ç”¨ <span class="inlinecode">::</span> ä¸­ç¼€æ“ä½œç¬¦ä»£æ›¿ <span class="inlinecode"><span class="id" type="var">cons</span></span>ã€‚æ³¨æ„: <span class="inlinecode">::</span> æ˜¯å³ç»“åˆçš„ã€‚

</li>
<li> ä½¿ç”¨ <span class="inlinecode">[</span> <span class="inlinecode">]</span> ä»£æ›¿ <span class="inlinecode"><span class="id" type="var">nil</span></span>ã€‚

</li>
<li> ä½¿ç”¨å•é‡ä¸­æ‹¬å·è®°æ³•ä»£æ›¿å¤šé‡åœ†æ‹¬å·è®°æ³•ã€‚

</li>
</ul>

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Notation</span> &quot;x :: l" := (<span class="id" type="var">cons</span> <span class="id" type="var">x</span> <span class="id" type="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 60, <span class="id" type="tactic">right</span> <span class="id" type="keyword">associativity</span>).<br/>
<span class="id" type="keyword">Notation</span> &quot;[ ]" := <span class="id" type="var">nil</span>.<br/>
<span class="id" type="keyword">Notation</span> &quot;[ x ; .. ; y ]" := (<span class="id" type="var">cons</span> <span class="id" type="var">x</span> .. (<span class="id" type="var">cons</span> <span class="id" type="var">y</span> <span class="id" type="var">nil</span>) ..).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">mylist1</span> := 1 :: (2 :: (3 :: <span class="id" type="var">nil</span>)).<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">mylist2</span> := 1 :: 2 :: 3 :: <span class="id" type="var">nil</span>.<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">mylist3</span> := [1;2;3].<br/>

<br/>
</div>

<div class="doc">
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€äº›å¸¸ç”¨çš„åˆ—è¡¨æ“ä½œå‡½æ•°ã€‚
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab66"></a><h3 class="section">Headï¼ˆå¸¦é»˜è®¤å€¼ï¼‰ä¸ Tail</h3>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" type="var">hd</span></span> å‡½æ•°è¿”å›åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå³â€œè¡¨å¤´ (head)â€ï¼‰ã€‚
  ç”±äºç©ºè¡¨æ²¡æœ‰è¡¨å¤´ï¼Œ<span class="inlinecode"><span class="id" type="var">hd</span></span> æ¥å—å¦ä¸€ä¸ªå‚æ•° <span class="inlinecode"><span class="id" type="var">default</span></span> 
  ä½œä¸ºè¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹çš„é»˜è®¤è¿”å›å€¼ã€‚
  (åé¢ï¼Œæˆ‘ä»¬ä¼šå­¦ä¹ ä¸€ç§æ›´ä¼˜é›…çš„å¤„ç†æ–¹å¼ã€‚)

<div class="paragraph"> </div>

  è¯¥å‡½æ•°çš„å®šä¹‰å±•ç¤ºäº†å¦‚ä½•å¯¹åˆ—è¡¨è¿›è¡Œæ¨¡å¼åŒ¹é…:
<ul class="doclist">
<li> ç©ºåˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">nil</span></span>;

</li>
<li> éç©ºåˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> å¯ä»¥æ‹†åˆ†ä¸ºè¡¨å¤´ <span class="inlinecode"><span class="id" type="var">h</span></span>
    ä¸è¡¨å°¾ <span class="inlinecode"><span class="id" type="var">t</span></span> (tail; ä»æ˜¯åˆ—è¡¨) ä¸¤éƒ¨åˆ†ã€‚

</li>
</ul>
  è¿™ç§æ¨¡å¼åŒ¹é…å¾ˆå¸¸ç”¨ã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">hd</span> (<span class="id" type="var">default</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> =&gt; <span class="id" type="var">default</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> =&gt; <span class="id" type="var">h</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">tl</span></span> å‡½æ•°è¿”å›åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> é™¤è¡¨å¤´ä»¥å¤–çš„éƒ¨åˆ†ï¼ˆå³â€œè¡¨å°¾ (tail)â€ï¼‰ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Definition</span> <span class="id" type="var">tl</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> =&gt; <span class="id" type="var">nil</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd1</span> : <span class="id" type="var">hd</span> 0 [1;2;3] = 1.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd2</span> : <span class="id" type="var">hd</span> 0 [] = 0.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_tl</span> : <span class="id" type="var">tl</span> [1;2;3] = [2;3].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab67"></a><h3 class="section">Repeat</h3>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" type="tactic">repeat</span></span> å‡½æ•°æ¥å—è‡ªç„¶æ•° <span class="inlinecode"><span class="id" type="var">n</span></span> å’Œ <span class="inlinecode"><span class="id" type="var">count</span></span>ï¼Œ
  è¿”å›ä¸€ä¸ªåŒ…å«äº† <span class="inlinecode"><span class="id" type="var">count</span></span> ä¸ª <span class="inlinecode"><span class="id" type="var">n</span></span> çš„åˆ—è¡¨ã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="tactic">repeat</span> (<span class="id" type="var">n</span> <span class="id" type="var">count</span> : <span class="id" type="var">nat</span>) : <span class="id" type="var">natlist</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">count</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">O</span> =&gt; <span class="id" type="var">nil</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">S</span> <span class="id" type="var">count'</span> =&gt; <span class="id" type="var">n</span> :: (<span class="id" type="tactic">repeat</span> <span class="id" type="var">n</span> <span class="id" type="var">count'</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab68"></a><h3 class="section">Length</h3>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" type="var">length</span></span> å‡½æ•°è¿”å›åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> çš„é•¿åº¦ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">length</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> =&gt; <span class="id" type="var">O</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> =&gt; <span class="id" type="var">S</span> (<span class="id" type="var">length</span> <span class="id" type="var">t</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab69"></a><h3 class="section">Append</h3>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" type="var">app</span></span> å‡½æ•°å°†ä¸¤ä¸ªåˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l1</span></span> <span class="inlinecode"><span class="id" type="var">l2</span></span> è”æ¥èµ·æ¥ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">app</span> (<span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l1</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span>    =&gt; <span class="id" type="var">l2</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> =&gt; <span class="id" type="var">h</span> :: (<span class="id" type="var">app</span> <span class="id" type="var">t</span> <span class="id" type="var">l2</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
æˆ‘ä»¬å¸¸ç”¨å³ç»“åˆçš„ä¸­ç¼€è¿ç®—ç¬¦ <span class="inlinecode">++</span> ä»£æ›¿ <span class="inlinecode"><span class="id" type="var">app</span></span>ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Notation</span> &quot;x ++ y" := (<span class="id" type="var">app</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="tactic">right</span> <span class="id" type="keyword">associativity</span>, <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 60).<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_app1</span>: [1;2;3] ++ [4;5] = [1;2;3;4;5].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_app2</span>: <span class="id" type="var">nil</span> ++ [4;5] = [4;5].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_app3</span>: [1;2;3] ++ <span class="id" type="var">nil</span> = [1;2;3].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab70"></a><h3 class="section">ç»ƒä¹ </h3>

<div class="paragraph"> </div>

<a name="lab71"></a><h4 class="section">ç»ƒä¹ ï¼š2 æ˜Ÿ, standard, recommended (list_funs)</h4>

<div class="paragraph"> </div>

  å®Œæˆå‡½æ•° <span class="inlinecode"><span class="id" type="var">nonzeros</span></span>ã€<span class="inlinecode"><span class="id" type="var">oddmembers</span></span> å’Œ <span class="inlinecode"><span class="id" type="var">countoddmembers</span></span>
  çš„å®šä¹‰ã€‚ä½ å¯ä»¥é€šè¿‡æµ‹è¯•ç”¨ä¾‹æ¥ç†è§£è¿™äº›å‡½æ•°çš„åŠŸèƒ½ã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">nonzeros</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_nonzeros</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">nonzeros</span> [0;1;0;2;3;0;0] = [1;2;3].<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">oddmembers</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_oddmembers</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">oddmembers</span> [0;1;0;2;3;0;0] = [1;3].<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">countoddmembers</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">nat</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_countoddmembers1</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">countoddmembers</span> [1;0;3;1;4;5] = 4.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_countoddmembers2</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">countoddmembers</span> [0;2;4] = 0.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_countoddmembers3</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">countoddmembers</span> <span class="id" type="var">nil</span> = 0.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab72"></a><h4 class="section">ç»ƒä¹ ï¼š3 æ˜Ÿ, advanced (alternate)</h4>

<div class="paragraph"> </div>

  è¯·å®Œæˆå‡½æ•° <span class="inlinecode"><span class="id" type="var">alternate</span></span> çš„å®šä¹‰ã€‚
  å®ƒäº¤æ›¿åœ°ä»ä¸¤ä¸ªåˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l1</span></span> <span class="inlinecode"><span class="id" type="var">l2</span></span> å–å…ƒç´ ï¼Œ
  ç”Ÿæˆä¸€ä¸ªåˆå¹¶åçš„åˆ—è¡¨ã€‚ä½ å¯ä»¥é€šè¿‡æµ‹è¯•ç”¨ä¾‹æ¥ç†è§£å®ƒçš„åŠŸèƒ½ã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">alternate</span> (<span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_alternate1</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">alternate</span> [1;2;3] [4;5;6] = [1;4;2;5;3;6].<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_alternate2</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">alternate</span> [1] [4;5;6] = [1;4;5;6].<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_alternate3</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">alternate</span> [1;2;3] [4] = [1;4;2;3].<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_alternate4</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">alternate</span> [] [20;30] = [20;30].<br/>
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab73"></a><h4 class="section">ç»ƒä¹ ï¼š3 æ˜Ÿ, standard, recommended (more list functions)</h4>
 è¯·å®Œæˆå‡½æ•° <span class="inlinecode"><span class="id" type="var">count</span></span> çš„å®šä¹‰ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">count</span> (<span class="id" type="var">v</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">nat</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_count1</span>: <span class="id" type="var">count</span> 1 [1;2;3;1;4;1] = 3.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_count2</span>: <span class="id" type="var">count</span> 6 [1;2;3;1;4;1] = 0.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
è¯·å®Œæˆå‡½æ•° <span class="inlinecode"><span class="id" type="var">member</span></span> çš„å®šä¹‰ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">member</span> (<span class="id" type="var">v</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">bool</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_member1</span>: <span class="id" type="var">member</span> 1 [1;4;1] = <span class="id" type="var">true</span>.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_member2</span>: <span class="id" type="var">member</span> 2 [1;4;1] = <span class="id" type="var">false</span>.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
è¯·å®Œæˆå‡½æ•° <span class="inlinecode"><span class="id" type="var">remov_one</span></span> çš„å®šä¹‰ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">remove_one</span> (<span class="id" type="var">v</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_one1</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_one</span> 5 [2;1;5;4;1]) = 0.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_one2</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_one</span> 5 [2;1;4;1]) = 0.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_one3</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">count</span> 4 (<span class="id" type="var">remove_one</span> 5 [2;1;4;5;1;4]) = 2.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_one4</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_one</span> 5 [2;1;5;4;5;1;4]) = 1.<br/>
 <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
å®Œæˆå‡½æ•° <span class="inlinecode"><span class="id" type="var">remov_all</span></span> çš„å®šä¹‰ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">remove_all</span> (<span class="id" type="var">v</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span><br/>
&nbsp;&nbsp;. <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_all1</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_all</span> 5 [2;1;5;4;1]) = 0.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_all2</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_all</span> 5 [2;1;4;1]) = 0.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_all3</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">count</span> 4 (<span class="id" type="var">remove_all</span> 5 [2;1;4;5;1;4]) = 2.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_all4</span>:<br/>
&nbsp;&nbsp;<span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_all</span> 5 [2;1;5;4;5;1;4;5;1;4]) = 0.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
å®Œæˆå‡½æ•° <span class="inlinecode"><span class="id" type="var">subset</span></span> çš„å®šä¹‰ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">subset</span> (<span class="id" type="var">l1</span> : <span class="id" type="var">natlist</span>) (<span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">bool</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_subset1</span>: <span class="id" type="var">subset</span> [1;2] [2;1;4;1] = <span class="id" type="var">true</span>.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_subset2</span>: <span class="id" type="var">subset</span> [1;2;2] [2;1;4;1] = <span class="id" type="var">false</span>.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab74"></a><h1 class="section">æœ‰å…³åˆ—è¡¨çš„è®ºè¯</h1>

<div class="paragraph"> </div>

  æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¹‹å‰å­¦ä¹ è¿‡çš„è¯æ˜ç­–ç•¥è®ºè¯ä¸åˆ—è¡¨ç›¸å…³çš„å®šç†ã€‚

<div class="paragraph"> </div>

 å¯¹äºå®šç† <span class="inlinecode"><span class="id" type="var">nil_app</span></span>ï¼Œ<span class="inlinecode"><span class="id" type="tactic">reflexivity</span></span> å·²è¶³å¤Ÿã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">nil_app</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;[] ++ <span class="id" type="var">l</span> = <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
å®šç† <span class="inlinecode"><span class="id" type="var">tl_length_pred</span></span> éœ€è¦åˆ†æƒ…å†µè®¨è®ºã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">tl_length_pred</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">pred</span> (<span class="id" type="var">length</span> <span class="id" type="var">l</span>) = <span class="id" type="var">length</span> (<span class="id" type="var">tl</span> <span class="id" type="var">l</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">l</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">l</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">l'</span>].<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab75"></a><h2 class="section">å¯¹åˆ—è¡¨è¿›è¡Œå½’çº³</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" type="var">natlist</span></span> æ˜¯å½’çº³å®šä¹‰çš„ï¼Œ
  å› æ­¤ï¼Œæœ‰å…³åˆ—è¡¨çš„å¾ˆå¤šå®šç†ï¼Œéƒ½éœ€è¦(ä¹Ÿå¯ä»¥)ä½¿ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜ã€‚

<div class="paragraph"> </div>

  å‡è®¾æˆ‘ä»¬éœ€è¦è¯æ˜å‘½é¢˜ <span class="inlinecode"><span class="id" type="var">P</span></span> å¯¹ä»»æ„åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> éƒ½æˆç«‹ã€‚
  æˆ‘ä»¬å¯ä»¥å¦‚ä¸‹å¯¹åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> ä½œå½’çº³:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode">[]</span>ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¯æ˜ <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode">[]</span> æˆç«‹ã€‚

</li>
<li> <span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" type="var">l'</span></span>ã€‚
    æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å½’çº³å‡è®¾ <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode"><span class="id" type="var">l'</span></span> æˆç«‹çš„æ¡ä»¶ä¸‹ï¼Œ
    è¯æ˜ <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode"><span class="id" type="var">l</span></span> æˆç«‹ã€‚

</li>
</ul>

<div class="paragraph"> </div>

 ä¸‹é¢ä½¿ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜ <span class="inlinecode"><span class="id" type="var">app</span></span> æ»¡è¶³ç»“åˆå¾‹ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">app_assoc</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l1</span> <span class="id" type="var">l2</span> <span class="id" type="var">l3</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;(<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) ++ <span class="id" type="var">l3</span> = <span class="id" type="var">l1</span> ++ (<span class="id" type="var">l2</span> ++ <span class="id" type="var">l3</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">l1</span> <span class="id" type="var">l2</span> <span class="id" type="var">l3</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">l1</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">l1'</span> <span class="id" type="var">IHl1'</span>]. &nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> -&gt; <span class="id" type="var">IHl1'</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  æ³¨æ„: <span class="inlinecode"><span class="id" type="tactic">induction</span></span> <span class="inlinecode"><span class="id" type="var">l1</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode">[</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">l1'</span></span> <span class="inlinecode"><span class="id" type="var">IHl1'</span>]</span> çš„ <span class="inlinecode"><span class="id" type="keyword">as</span></span> ä»å¥
  å¯¹åº”äº <span class="inlinecode"><span class="id" type="var">l</span></span> çš„ä¸¤ä¸ªæ„é€ å‡½æ•°:
<ul class="doclist">
<li> <span class="inlinecode"></span> <span class="inlinecode">|</span> <span class="inlinecode"></span> å·¦è¾¹ä¸ºç©ºã€‚è¿™æ˜¯å› ä¸ºæ„é€ å‡½æ•° <span class="inlinecode"><span class="id" type="var">nil</span></span> ä¸å«å‚æ•°ï¼Œ
    ä¸”åœ¨å½’çº³è¯æ˜ä¸­å±äºåŸºæœ¬æƒ…å½¢ã€‚

</li>
<li> <span class="inlinecode"></span> <span class="inlinecode">|</span> <span class="inlinecode"></span> å³è¾¹æœ‰ä¸‰ä¸ªå‚æ•° <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">l1'</span></span> <span class="inlinecode"><span class="id" type="var">IHl1'</span></span>ã€‚
    å‰ä¸¤ä¸ªå‚æ•°å¯¹åº”æ„é€ å‡½æ•° <span class="inlinecode"><span class="id" type="var">cons</span></span> çš„ä¸¤ä¸ªå‚æ•°ï¼Œ
    åˆ†åˆ«è®°å½•äº† <span class="inlinecode"><span class="id" type="var">l1</span></span> çš„è¡¨å¤´ <span class="inlinecode"><span class="id" type="var">n</span></span> ä¸è¡¨å°¾ <span class="inlinecode"><span class="id" type="var">l1'</span></span>ã€‚
    å¦å¤–ï¼Œ<span class="inlinecode"><span class="id" type="var">IHl1'</span></span> è®°å½•äº†é’ˆå¯¹ <span class="inlinecode"><span class="id" type="var">l1'</span></span> çš„å½’çº³å‡è®¾ï¼Œ
    å³ <span class="inlinecode"><span class="id" type="var">IHl1'</span>:</span> <span class="inlinecode">(<span class="id" type="var">l1'</span></span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" type="var">l2</span>)</span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" type="var">l3</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">l1'</span></span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" type="var">l2</span></span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" type="var">l3</span></span>ã€‚

</li>
</ul>

<div class="paragraph"> </div>

  è¯·ç¡®ä¿ä½ çœŸæ­£ç†è§£äº† <span class="inlinecode"><span class="id" type="tactic">induction</span></span> <span class="inlinecode"><span class="id" type="var">l1</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode">[</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">l1'</span></span> <span class="inlinecode"><span class="id" type="var">IHl1'</span>]</span> çš„å«ä¹‰ã€‚
  åé¢ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æ›´å¤æ‚çš„ä¾‹å­ã€‚

</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab76"></a><h3 class="section">åè½¬åˆ—è¡¨</h3>

<div class="paragraph"> </div>

 å‡½æ•° <span class="inlinecode"><span class="id" type="var">rev</span></span> å°†åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> åè½¬ï¼Œå®ƒçš„å®šä¹‰ä½¿ç”¨äº† <span class="inlinecode"><span class="id" type="var">app</span></span> å‡½æ•°ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">rev</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span>    =&gt; <span class="id" type="var">nil</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> =&gt; <span class="id" type="var">rev</span> <span class="id" type="var">t</span> ++ [<span class="id" type="var">h</span>]<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_rev2</span>: <span class="id" type="var">rev</span> <span class="id" type="var">nil</span> = <span class="id" type="var">nil</span>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_rev1</span>: <span class="id" type="var">rev</span> [1;2;3] = [3;2;1].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab77"></a><h4 class="section">ç»ƒä¹ ï¼š3 æ˜Ÿ, standard, recommended (more list functions)</h4>
 è¯·è¯æ˜å®šç† <span class="inlinecode"><span class="id" type="var">app_length</span></span>ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">app_length</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">length</span> (<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) = (<span class="id" type="var">length</span> <span class="id" type="var">l1</span>) + (<span class="id" type="var">length</span> <span class="id" type="var">l2</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
</div>

<div class="doc">
è¯·åœ¨æ­¤å¤„è§£ç­” 
</div>
<div class="code code-tight">
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
  è¯·è¯æ˜å®šç† <span class="inlinecode"><span class="id" type="var">rev_length</span></span>ã€‚
  ä½ å¯èƒ½éœ€è¦ä½¿ç”¨ <span class="inlinecode"><span class="id" type="var">app_length</span></span> ä¸ <span class="inlinecode"><span class="id" type="var">plus_comm</span></span>ã€‚

</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">rev_length</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">length</span> (<span class="id" type="var">rev</span> <span class="id" type="var">l</span>) = <span class="id" type="var">length</span> <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
</div>

<div class="doc">
è¯·åœ¨æ­¤å¤„è§£ç­” 
</div>
<div class="code code-tight">
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab78"></a><h2 class="section">åˆ—è¡¨ç»ƒä¹ ï¼Œç¬¬ä¸€éƒ¨åˆ†</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  ä½ éœ€è¦é€šè¿‡å¤§é‡çš„ç»ƒä¹ ä¸æ€è€ƒ (ç»ƒä¹ ä¹‹åçš„æ€è€ƒå¾ˆé‡è¦!å¾ˆé‡è¦!å¾ˆé‡è¦!)
  åŸ¹å…»è¯æ˜çš„ç›´è§‰ã€‚
  æ¯”å¦‚ï¼Œåˆ†æƒ…å½¢åˆ†æå¤Ÿä¸å¤Ÿç”¨? éœ€ä¸éœ€è¦ç”¨æ•°å­¦å½’çº³æ³•? å¯¹ä»€ä¹ˆä½œå½’çº³? ç­‰ç­‰ã€‚

<div class="paragraph"> </div>

<a name="lab79"></a><h4 class="section">ç»ƒä¹ ï¼š3 æ˜Ÿ, standard (list_exercises)</h4>

</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">app_nil_r</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">l</span> ++ [] = <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">rev_app_distr</span>: <span class="id" type="keyword">forall</span> <span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">rev</span> (<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) = <span class="id" type="var">rev</span> <span class="id" type="var">l2</span> ++ <span class="id" type="var">rev</span> <span class="id" type="var">l1</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">rev_involutive</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">rev</span> (<span class="id" type="var">rev</span> <span class="id" type="var">l</span>) = <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">app_assoc4</span></span> æœ‰ç®€æ´çš„è¯æ˜ã€‚ä¸è¦èµ°äº†å¼¯è·¯ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">app_assoc4</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l1</span> <span class="id" type="var">l2</span> <span class="id" type="var">l3</span> <span class="id" type="var">l4</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">l1</span> ++ (<span class="id" type="var">l2</span> ++ (<span class="id" type="var">l3</span> ++ <span class="id" type="var">l4</span>)) = ((<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) ++ <span class="id" type="var">l3</span>) ++ <span class="id" type="var">l4</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Print</span> <span class="id" type="var">nonzeros</span>. <span class="id" type="keyword">Lemma</span> <span class="id" type="var">nonzeros_app</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">nonzeros</span> (<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) = (<span class="id" type="var">nonzeros</span> <span class="id" type="var">l1</span>) ++ (<span class="id" type="var">nonzeros</span> <span class="id" type="var">l2</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab80"></a><h4 class="section">ç»ƒä¹ ï¼š2 æ˜Ÿ, standard (eqblist)</h4>

<div class="paragraph"> </div>

  è¯·å®Œæˆ <span class="inlinecode"><span class="id" type="var">eqblist</span></span> çš„å®šä¹‰ï¼Œå®ƒåˆ¤æ–­åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l1</span></span>ã€<span class="inlinecode"><span class="id" type="var">l2</span></span> æ˜¯å¦ç›¸åŒã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">eqblist</span> (<span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">bool</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_eqblist1</span> :<br/>
&nbsp;&nbsp;(<span class="id" type="var">eqblist</span> <span class="id" type="var">nil</span> <span class="id" type="var">nil</span> = <span class="id" type="var">true</span>).<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_eqblist2</span> :<br/>
&nbsp;&nbsp;<span class="id" type="var">eqblist</span> [1;2;3] [1;2;3] = <span class="id" type="var">true</span>.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_eqblist3</span> :<br/>
&nbsp;&nbsp;<span class="id" type="var">eqblist</span> [1;2;3] [1;2;4] = <span class="id" type="var">false</span>.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
  å¦‚æœæˆ‘ä»¬å°†å‡½æ•° <span class="inlinecode"><span class="id" type="var">eqblist</span></span> çœ‹ä½œä¸¤ä¸ªåˆ—è¡¨ä¹‹é—´çš„ä¸€ç§
   <b>å…³ç³»</b> (Relation), é‚£ä¹ˆå®ƒæ˜¯ _è‡ªåçš„_ (Reflexive)ã€‚

<div class="paragraph"> </div>

  å—¯ï¼Œå¦‚æœä½ ç°åœ¨è¿˜ä¸æ˜ç™½ä¸Šé¢é‚£å¥è¯åœ¨è¯´äº›ä»€ä¹ˆï¼Œ
  ä¸è¦ç´§ï¼Œç›´æ¥è¯æ˜ä¸‹é¢çš„å®šç† <span class="inlinecode"><span class="id" type="var">eqblist_refl</span></span> å°±å¥½äº†ã€‚ 

</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">eqblist_refl</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">true</span> = <span class="id" type="var">eqblist</span> <span class="id" type="var">l</span> <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab81"></a><h4 class="section">ç»ƒä¹ ï¼š1 æ˜Ÿ, standard (count_member_nonzero)</h4>

</div>
<div class="code code-tight">
<span class="id" type="keyword">Print</span> <span class="id" type="var">count</span>. <span class="id" type="keyword">Theorem</span> <span class="id" type="var">count_member_nonzero</span> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>),<br/>
&nbsp;&nbsp;1 &lt;=? (<span class="id" type="var">count</span> 1 (1 :: <span class="id" type="var">l</span>)) = <span class="id" type="var">true</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Print</span> <span class="id" type="var">remove_one</span>. </div>

<div class="doc">
<a name="lab82"></a><h4 class="section">ç»ƒä¹ ï¼š3 æ˜Ÿ, advanced (remove_does_not_increase_count)</h4>

</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">remove_does_not_increase_count</span>: <span class="id" type="keyword">forall</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>),<br/>
&nbsp;&nbsp;(<span class="id" type="var">count</span> 0 (<span class="id" type="var">remove_one</span> 0 <span class="id" type="var">l</span>)) &lt;=? (<span class="id" type="var">count</span> 0 <span class="id" type="var">l</span>) = <span class="id" type="var">true</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab83"></a><h4 class="section">ç»ƒä¹ ï¼š4 æ˜Ÿ, advanced (rev_injective)</h4>

<div class="paragraph"> </div>

  è¯·ç”¨å°½å¯èƒ½ç®€æ´çš„æ–¹æ³•è¯æ˜å®šç† <span class="inlinecode"><span class="id" type="var">rev_injective</span></span>: <span class="inlinecode"><span class="id" type="var">rev</span></span> æ˜¯å•å°„å‡½æ•°ã€‚

</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">rev_injective</span> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>), <br/>
&nbsp;&nbsp;<span class="id" type="var">rev</span> <span class="id" type="var">l1</span> = <span class="id" type="var">rev</span> <span class="id" type="var">l2</span> -&gt; <span class="id" type="var">l1</span> = <span class="id" type="var">l2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab84"></a><h1 class="section">Options å¯é€‰ç±»å‹</h1>

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Print</span> <span class="id" type="var">hd</span>.<br/>
</div>

<div class="doc">
  ç°åœ¨ï¼Œæˆ‘ä»¬å›åˆ°ä¸€å¼€å§‹å¯¹ <span class="inlinecode"><span class="id" type="var">hd</span></span> (head) å‡½æ•°çš„å®šä¹‰:
  <span class="inlinecode"><span class="id" type="keyword">Definition</span></span> <span class="inlinecode"><span class="id" type="var">hd</span></span> <span class="inlinecode">(<span class="id" type="var">default</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">nat</span>)</span> <span class="inlinecode">(<span class="id" type="var">l</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">natlist</span>)</span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">nat</span></span>ã€‚
  ä¸ºäº†å¤„ç† <span class="inlinecode"><span class="id" type="var">l</span></span> ä¸ºç©ºçš„æƒ…å†µï¼Œ<span class="inlinecode"><span class="id" type="var">hd</span></span> è¦æ±‚è°ƒç”¨è€…æä¾›é»˜è®¤è¿”å›å€¼ <span class="inlinecode"><span class="id" type="var">default</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">nat</span></span>ã€‚
  ç„¶è€Œï¼Œè¿™ç§å¤„ç†æ–¹å¼ä¸å¤Ÿä¼˜é›…:
<ul class="doclist">
<li> ç ´åäº† <span class="inlinecode"><span class="id" type="var">hd</span></span> çš„è¯­ä¹‰ã€‚

</li>
<li> è¿”å›å€¼ä¸º <span class="inlinecode"><span class="id" type="var">default</span></span> æ—¶ï¼Œæ— æ³•åŒºåˆ† <span class="inlinecode"><span class="id" type="var">l</span></span> çš„è¡¨å¤´ç¡®å®ä¸º <span class="inlinecode"><span class="id" type="var">default</span></span> 
    ä¸ <span class="inlinecode"><span class="id" type="var">l</span></span> ä¸ºç©ºçš„æƒ…å†µã€‚

</li>
<li> ç»™è°ƒç”¨è€…å¢åŠ è´Ÿæ‹…ã€‚

</li>
</ul>

<div class="paragraph"> </div>

  å‡½æ•° <span class="inlinecode"><span class="id" type="var">nth</span>-<span class="id" type="var">bad</span></span> æ˜¯å¯¹ <span class="inlinecode"><span class="id" type="var">hd</span></span> çš„æ‰©å±•ï¼Œå®ƒè¿”å›åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> ä¸­çš„ç¬¬ <span class="inlinecode"><span class="id" type="var">n</span></span> ä¸ªå…ƒç´ ã€‚
  å½“ <span class="inlinecode"><span class="id" type="var">l</span></span> è¿‡çŸ­æ—¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªä»»æ„å€¼ï¼Œè¿™é‡Œé€‰æ‹©è¿”å› <span class="inlinecode">42</span>ã€‚
  å®ƒå­˜åœ¨ä¸ <span class="inlinecode"><span class="id" type="var">hd</span></span> ç±»ä¼¼çš„ä¸è¶³ã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">nth_bad</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) (<span class="id" type="var">n</span> : <span class="id" type="var">nat</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> =&gt; 42  <br/>
&nbsp;&nbsp;| <span class="id" type="var">a</span> :: <span class="id" type="var">l'</span> =&gt; <span class="id" type="keyword">match</span> <span class="id" type="var">n</span> =? <span class="id" type="var">O</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">true</span> =&gt; <span class="id" type="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">false</span> =&gt; <span class="id" type="var">nth_bad</span> <span class="id" type="var">l'</span> (<span class="id" type="var">pred</span> <span class="id" type="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Print</span> <span class="id" type="var">option</span>.<br/>
</div>

<div class="doc">
Inductive option (A : Type) : Type :=
  | Some (x : A)
  | None. 

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  ä¸ºäº†è§£å†³è¯¥ç±»é—®é¢˜ï¼ŒCoq æä¾›äº† <span class="inlinecode"><span class="id" type="var">option</span></span> ç±»å‹ã€‚
  <span class="inlinecode"><span class="id" type="var">option</span></span> ç±»å‹æ˜¯å¯¹ _å¯é€‰å€¼_ (Optional Value) çš„ä¸€ç§å°è£…ã€‚
  ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå®ƒè¡¨ç¤ºè¯¥å‡½æ•°å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªæ— æ„ä¹‰çš„å€¼ï¼Œ
  ç”¨ä»¥æ ‡è¯†é”™è¯¯å¤„ç†ã€‚
  å®ƒåŒ…å«ä¸¤ä¸ªæ„é€ å‡½æ•°:
<ul class="doclist">
<li> Some A: è¡¨ç¤ºç±»å‹ä¸º A çš„å€¼ã€‚

</li>
<li> None: è¡¨ç¤ºç©ºå€¼ã€‚

</li>
</ul>

<div class="paragraph"> </div>

  å¾ˆå¤šç¨‹åºè®¾è®¡è¯­è¨€é‡Œéƒ½æœ‰ç±»ä¼¼çš„ <span class="inlinecode"><span class="id" type="var">option</span></span> ç±»å‹ï¼Œ
  å¦‚ Java 8 ä¸­çš„ <span class="inlinecode"><span class="id" type="var">Optional</span></span>ï¼ŒScala ä¸­çš„ <span class="inlinecode"><span class="id" type="var">Option</span></span>ï¼Œ
  Haskell ä¸­çš„ <span class="inlinecode"><span class="id" type="var">Maybe</span></span> ç­‰ã€‚
  æ›´å¤šå†…å®¹å‚è§: https://en.wikipedia.org/wiki/Option_type (@wiki)ã€‚

<div class="paragraph"> </div>

  Coq ä¸­çš„ <span class="inlinecode"><span class="id" type="var">option</span></span> æ˜¯ _å¤šæ€ç±»å‹_ (Polymorphic Type)
  (ä¸‹ä¸€èŠ‚ä¼šä»‹ç»è¿™ä¸ªæ¦‚å¿µ)ã€‚
  æœ¬èŠ‚æˆ‘ä»¬å°†è¢«å°è£…çš„å€¼çš„ç±»å‹é™å®šä¸º <span class="inlinecode"><span class="id" type="var">nat</span></span>ã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Inductive</span> <span class="id" type="var">natoption</span> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id" type="var">Some</span> (<span class="id" type="var">n</span> : <span class="id" type="var">nat</span>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">None</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><span class="id" type="var">nth_error</span></span> æ˜¯å¯¹ <span class="inlinecode"><span class="id" type="var">nth_bad</span></span> çš„æ”¹è¿›ã€‚
  æ³¨æ„ï¼Œ<span class="inlinecode"><span class="id" type="var">nth_error</span></span> çš„è¿”å›ç±»å‹æ˜¯ <span class="inlinecode"><span class="id" type="var">natoption</span></span>:
<ul class="doclist">
<li> å½“åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> è¿‡çŸ­æ—¶ï¼Œå®ƒè¿”å› <span class="inlinecode"><span class="id" type="var">None</span></span>ï¼Œ

</li>
<li> å¦åˆ™å®ƒå°†å…ƒç´  <span class="inlinecode"><span class="id" type="var">a</span></span> å°è£…æˆç±»å‹ä¸º <span class="inlinecode"><span class="id" type="var">natoption</span></span> çš„ <span class="inlinecode"><span class="id" type="var">Some</span></span> <span class="inlinecode"><span class="id" type="var">a</span></span>ï¼Œ
    ç„¶åè¿”å› <span class="inlinecode"><span class="id" type="var">Some</span></span> <span class="inlinecode"><span class="id" type="var">a</span></span>ã€‚

</li>
</ul>

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">nth_error</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) (<span class="id" type="var">n</span> : <span class="id" type="var">nat</span>) : <span class="id" type="var">natoption</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> =&gt; <span class="id" type="var">None</span> <br/>
&nbsp;&nbsp;| <span class="id" type="var">a</span> :: <span class="id" type="var">l'</span> =&gt; <span class="id" type="keyword">match</span> <span class="id" type="var">n</span> =? <span class="id" type="var">O</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">true</span> =&gt; <span class="id" type="var">Some</span> <span class="id" type="var">a</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">false</span> =&gt; <span class="id" type="var">nth_error</span> <span class="id" type="var">l'</span> (<span class="id" type="var">pred</span> <span class="id" type="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_nth_error1</span> : <span class="id" type="var">nth_error</span> [4;5;6;7] 0 = <span class="id" type="var">Some</span> 4.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_nth_error2</span> : <span class="id" type="var">nth_error</span> [4;5;6;7] 3 = <span class="id" type="var">Some</span> 7.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_nth_error3</span> : <span class="id" type="var">nth_error</span> [4;5;6;7] 9 = <span class="id" type="var">None</span>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><span class="id" type="var">nth_error</span></span> ä¸­çš„åµŒå¥—æ¨¡å¼åŒ¹é… <span class="inlinecode"><span class="id" type="keyword">match</span></span> <span class="inlinecode"><span class="id" type="var">n</span>=?</span> <span class="inlinecode"><span class="id" type="var">O</span></span>
  ä¹Ÿå¯ä»¥æ¢æˆæ¡ä»¶è¡¨è¾¾å¼ï¼Œ
  å¦‚ä¸‹é¢çš„ <span class="inlinecode"><span class="id" type="var">nth_error_if</span></span> æ‰€ç¤ºã€‚

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">nth_error_if</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) (<span class="id" type="var">n</span> : <span class="id" type="var">nat</span>) : <span class="id" type="var">natoption</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> =&gt; <span class="id" type="var">None</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">a</span> :: <span class="id" type="var">l'</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">if</span> <span class="id" type="var">n</span> =? <span class="id" type="var">O</span> <span class="id" type="keyword">then</span> <span class="id" type="var">Some</span> <span class="id" type="var">a</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> <span class="id" type="var">nth_error_if</span> <span class="id" type="var">l'</span> (<span class="id" type="var">pred</span> <span class="id" type="var">n</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
  æ¥æ”¶åˆ°ç±»å‹ä¸º <span class="inlinecode"><span class="id" type="var">natoption</span></span> çš„å€¼ <span class="inlinecode"><span class="id" type="var">v</span></span> ä»¥åï¼Œ
  æˆ‘ä»¬é€šå¸¸ä¼šå¯¹å…¶è¿›è¡Œæ¨¡å¼åŒ¹é… <span class="inlinecode"><span class="id" type="keyword">match</span></span> <span class="inlinecode"><span class="id" type="var">v</span></span> <span class="inlinecode"><span class="id" type="keyword">with</span></span>:
<ul class="doclist">
<li> å¦‚æœä¸º <span class="inlinecode"><span class="id" type="var">None</span></span>ï¼Œåˆ™åšç‰¹æ®Šå¤„ç†ã€‚

</li>
<li> å¦‚æœä¸º <span class="inlinecode"><span class="id" type="var">Some</span></span> <span class="inlinecode"><span class="id" type="var">a</span></span>ï¼Œåˆ™å¯¹ <span class="inlinecode"><span class="id" type="var">a</span></span> åšå¤„ç†ã€‚

</li>
</ul>

<div class="paragraph"> </div>

<a name="lab85"></a><h4 class="section">ç»ƒä¹ ï¼š2 æ˜Ÿ, standard (hd_error)</h4>
 è¯·ä½¿ç”¨ <span class="inlinecode"><span class="id" type="var">natoption</span></span> æ€æƒ³ä¿®æ”¹ä¹‹å‰å®šä¹‰çš„ <span class="inlinecode"><span class="id" type="var">hd</span></span> å‡½æ•°ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">hd_error</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natoption</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd_error1</span> : <span class="id" type="var">hd_error</span> [] = <span class="id" type="var">None</span>.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd_error2</span> : <span class="id" type="var">hd_error</span> [1] = <span class="id" type="var">Some</span> 1.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd_error3</span> : <span class="id" type="var">hd_error</span> [5;6] = <span class="id" type="var">Some</span> 5.<br/>
<span class="id" type="keyword">Proof</span>.  <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">
<span class="id" type="keyword">End</span> <span class="id" type="var">NatList</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab86"></a><h1 class="section">Trees: åŸºç¡€æ•°æ®ç±»å‹</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  æˆ‘ä»¬ä»¥ <b>äºŒå‰æ ‘</b> (Binary Tree) ä¸ºä¾‹ã€‚
  äºŒå‰æ ‘åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å æœ‰é‡è¦åœ°ä½ï¼Œåº”ç”¨ä¹‹ä¸€å°±æ˜¯ (å¹³è¡¡) äºŒå‰æœç´¢æ ‘ã€‚

<div class="paragraph"> </div>

  é¡¾åæ€ä¹‰ï¼Œåœ¨äºŒå‰æ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹ (Node) æœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ (Children)ï¼Œ
  åˆ†åˆ«ç§°ä¸ºå·¦å­èŠ‚ç‚¹ (Left Child) ä¸å³å­èŠ‚ç‚¹ (Right Child)ã€‚
  åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬ä»ç„¶é™åˆ¶æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å…ƒç´ éƒ½æ˜¯è‡ªç„¶æ•°ç±»å‹ã€‚

<div class="paragraph"> </div>

  æˆ‘ä»¬ä½¿ç”¨å½’çº³æ–¹å¼å®šä¹‰(è‡ªç„¶æ•°)äºŒå‰æ ‘ nat_bin_treeã€‚
  (æ³¨æ„ï¼Œæˆ‘ä»¬å°†äºŒå‰æ ‘ç¼©å†™æˆ bin_treeï¼Œè€Œä¸æ˜¯ btreeã€‚
  è¿™æ˜¯å› ä¸ºï¼ŒBTree æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„å¦ä¸€ä¸ªä¸“æœ‰åè¯ã€‚)

<div class="paragraph"> </div>

  äºŒå‰æ ‘æœ‰ä¸”ä»…æœ‰ä¸¤ç§æ„é€ æ–¹å¼:
<ul class="doclist">
<li> ç©ºæ ‘ <span class="inlinecode"><span class="id" type="var">Empty</span></span> æ˜¯äºŒå‰æ ‘ã€‚

</li>
<li> å¦‚æœ <span class="inlinecode"><span class="id" type="var">L</span></span> æ˜¯äºŒå‰æ ‘ï¼Œ<span class="inlinecode"><span class="id" type="var">R</span></span> æ˜¯äºŒå‰æ ‘ï¼Œ<span class="inlinecode"><span class="id" type="var">n</span></span> æ˜¯è‡ªç„¶æ•°ï¼Œåˆ™ <span class="inlinecode"><span class="id" type="var">Node</span></span> <span class="inlinecode"><span class="id" type="var">L</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">R</span></span>
    æ˜¯äºŒå‰æ ‘ã€‚
    <span class="inlinecode"><span class="id" type="var">L</span></span> ç§°ä¸º <span class="inlinecode"><span class="id" type="var">Node</span></span> <span class="inlinecode"><span class="id" type="var">L</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">R</span></span> çš„å·¦å­æ ‘ï¼Œ<span class="inlinecode"><span class="id" type="var">R</span></span> ç§°ä¸º <span class="inlinecode"><span class="id" type="var">Node</span></span> <span class="inlinecode"><span class="id" type="var">L</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">R</span></span> çš„å³å­æ ‘ã€‚
    <span class="inlinecode"><span class="id" type="var">Node</span></span> <span class="inlinecode"><span class="id" type="var">L</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">R</span></span> ç§°ä¸º <span class="inlinecode"><span class="id" type="var">L</span></span> ä¸ <span class="inlinecode"><span class="id" type="var">R</span></span> çš„ <b>çˆ¶èŠ‚ç‚¹</b> (Parent)ã€‚
    å·¦å³å­æ ‘éƒ½ä¸º <span class="inlinecode"><span class="id" type="var">Empty</span></span> çš„èŠ‚ç‚¹ç§°ä¸º <b>å¶èŠ‚ç‚¹</b> (Leaf)ã€‚
    æ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸º <b>æ ¹èŠ‚ç‚¹</b> (Root)ã€‚

</li>
</ul>

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Inductive</span> <span class="id" type="var">nat_bin_tree</span> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id" type="var">Empty</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">Node</span> (<span class="id" type="var">L</span> : <span class="id" type="var">nat_bin_tree</span>) (<span class="id" type="var">n</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">R</span> : <span class="id" type="var">nat_bin_tree</span>).<br/>

<br/>
</div>

<div class="doc">
åœ¨æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ä¹‹å‰ï¼Œå…ˆæƒ³ä¸€æƒ³å®ƒçš„ç»“æœã€‚ 
</div>
<div class="code code-tight">
<span class="id" type="keyword">Check</span> <span class="id" type="var">Empty</span>.<br/>
<span class="id" type="keyword">Check</span> <span class="id" type="var">Node</span>.<br/>
<span class="id" type="keyword">Check</span> (<span class="id" type="var">Node</span> (<span class="id" type="var">Empty</span>) 5 (<span class="id" type="var">Empty</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab87"></a><h4 class="section">ç»ƒä¹ ï¼š2 æ˜Ÿ, standard (functions on <span class="inlinecode"><span class="id" type="var">nat_bin_tree</span></span>)</h4>
 ä¸‹é¢ä½ éœ€è¦ä¸º <span class="inlinecode"><span class="id" type="var">nat_bin_tree</span></span> å®šä¹‰ä¸€äº›å‡½æ•°ï¼Œå¹¶ç¼–å†™æµ‹è¯•ç”¨ä¾‹ã€‚
<div class="paragraph"> </div>


<div class="paragraph"> </div>

  å‡½æ•° <span class="inlinecode"><span class="id" type="var">nsize</span></span> è®¡ç®—äºŒå‰æ ‘ <span class="inlinecode"><span class="id" type="var">t</span></span> çš„å¤§å°ï¼Œå³ <span class="inlinecode"><span class="id" type="var">t</span></span> ä¸­èŠ‚ç‚¹çš„æ•°ç›®ã€‚
  æ³¨æ„ï¼Œç©ºæ ‘ <span class="inlinecode"><span class="id" type="var">Empty</span></span> çš„å¤§å°ä¸º 0ã€‚

</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">nsize</span> (<span class="id" type="var">t</span> : <span class="id" type="var">nat_bin_tree</span>) : <span class="id" type="var">nat</span> <br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
  å‡½æ•° <span class="inlinecode"><span class="id" type="var">nsum</span></span> è®¡ç®—äºŒå‰æ ‘ <span class="inlinecode"><span class="id" type="var">t</span></span> æ‰€æœ‰èŠ‚ç‚¹ä¸­çš„å…ƒç´ ä¹‹å’Œã€‚

</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">nsum</span> (<span class="id" type="var">t</span> : <span class="id" type="var">nat_bin_tree</span>) : <span class="id" type="var">nat</span> <br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
  å‡½æ•° <span class="inlinecode"><span class="id" type="var">nreflect</span></span> äº¤æ¢ _æ¯ä¸ª_èŠ‚ç‚¹çš„å·¦å³å­æ ‘ã€‚

</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">nreflect</span> (<span class="id" type="var">t</span> : <span class="id" type="var">nat_bin_tree</span>) : <span class="id" type="var">nat_bin_tree</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
  ä¸ <span class="inlinecode"><span class="id" type="var">natlist</span></span> ä¸€æ ·ï¼Œ<span class="inlinecode"><span class="id" type="var">nat_bin_tree</span></span> ä¹Ÿæ˜¯å½’çº³å®šä¹‰çš„ï¼Œ
  æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ <span class="inlinecode"><span class="id" type="var">nat_bin_tree</span></span> ä½¿ç”¨æ•°å­¦å½’çº³æ³•ã€‚

<div class="paragraph"> </div>

  ä¸åŒçš„æ˜¯ï¼Œ<span class="inlinecode"><span class="id" type="var">nat_bin_tree</span></span> çš„ <span class="inlinecode"><span class="id" type="var">Node</span></span> æ„é€ å‡½æ•°ä¸­
  å«æœ‰_ä¸¤ä¸ª_ <span class="inlinecode"><span class="id" type="var">Node</span></span> ç±»å‹çš„å‚æ•°ã€‚
  å› æ­¤ï¼Œå¯¹ <span class="inlinecode"><span class="id" type="var">nat_bin_tree</span></span> ç±»å‹çš„ <span class="inlinecode"><span class="id" type="var">t</span></span> åšæ•°å­¦å½’çº³æ—¶ï¼Œ
  åœ¨å½’çº³æ­¥éª¤ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå½’çº³å‡è®¾ï¼Œåˆ†åˆ«é’ˆå¯¹ <span class="inlinecode"><span class="id" type="var">t</span></span> çš„å·¦å³å­æ ‘ã€‚

<div class="paragraph"> </div>

  æ¯”å¦‚ï¼Œä¸‹é¢è¯æ˜å¼€å¤´ <span class="inlinecode"><span class="id" type="tactic">induction</span></span> <span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode">[</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" type="var">L</span></span> <span class="inlinecode"><span class="id" type="var">IHL</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">R</span></span> <span class="inlinecode"><span class="id" type="var">IHR</span>]</span>
  ä¸­çš„ <span class="inlinecode"><span class="id" type="var">IHL</span></span> ä¸ <span class="inlinecode"><span class="id" type="var">IHR</span></span> åˆ†åˆ«è¡¨ç¤ºé’ˆå¯¹å·¦å­æ ‘ <span class="inlinecode"><span class="id" type="var">L</span></span> ä¸å³å­æ ‘ <span class="inlinecode"><span class="id" type="var">R</span></span>
  çš„å½’çº³å‡è®¾ã€‚

<div class="paragraph"> </div>

  äº†è§£äº†è¿™äº›ï¼Œä½ åº”è¯¥å¯ä»¥å®Œæˆä¸‹é¢çš„è¯æ˜äº†ã€‚

</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">nreflect_involutive</span>: <span class="id" type="keyword">forall</span> <span class="id" type="var">t</span> : <span class="id" type="var">nat_bin_tree</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">nreflect</span> (<span class="id" type="var">nreflect</span> <span class="id" type="var">t</span>) = <span class="id" type="var">t</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">t</span> <span class="id" type="keyword">as</span> [ | <span class="id" type="var">L</span> <span class="id" type="var">IHL</span> <span class="id" type="var">n</span> <span class="id" type="var">R</span> <span class="id" type="var">IHR</span>].<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
  å‡½æ•° <span class="inlinecode"><span class="id" type="var">height</span></span> è®¡ç®—äºŒå‰æ ‘ <span class="inlinecode"><span class="id" type="var">t</span></span> çš„é«˜åº¦:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" type="var">Empty</span></span> çš„é«˜åº¦è®°ä¸º -1ã€‚

</li>
<li> èŠ‚ç‚¹ <span class="inlinecode"><span class="id" type="var">Node</span></span> <span class="inlinecode"><span class="id" type="var">L</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">R</span></span> çš„é«˜åº¦æ˜¯å®ƒçš„ä¸¤ä¸ªå­æ ‘çš„æœ€å¤§é«˜åº¦åŠ  1ã€‚

</li>
<li> æ ‘ <span class="inlinecode"><span class="id" type="var">t</span></span> çš„é«˜åº¦æ˜¯å®ƒçš„æ ¹ç»“ç‚¹çš„é«˜åº¦ã€‚

</li>
</ul>

<div class="paragraph"> </div>

  ä½ å¯ä»¥ä½¿ç”¨ <span class="inlinecode"><span class="id" type="var">Nat.max</span></span> å‡½æ•°ï¼Œæˆ–è€…è‡ªå®šä¹‰æ±‚æœ€å¤§å€¼çš„å‡½æ•°ã€‚

</div>
<div class="code code-tight">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">height</span> (<span class="id" type="var">t</span> : <span class="id" type="var">nat_bin_tree</span>) : <span class="id" type="var">nat</span><br/>
&nbsp;&nbsp;.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
è¯·è¯æ˜å®šç† <span class="inlinecode"><span class="id" type="var">nreflect_preserve_height</span></span>: <span class="inlinecode"><span class="id" type="var">nreflect</span></span> ä¸æ”¹å˜æ ‘çš„é«˜åº¦ã€‚
</div>
<div class="code code-tight">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">nreflect_preserve_height</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">t</span> : <span class="id" type="var">nat_bin_tree</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">height</span> (<span class="id" type="var">nreflect</span> <span class="id" type="var">t</span>) = <span class="id" type="var">height</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>
</div>

</div>

</body>
</html>