<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Logic</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Logic</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Logic: Coq 中的逻辑系统</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-notation-overridden,-parsing".<br/>
<span class="id" title="var">From</span> <span class="id" title="var">LF</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">Basics</span>.<br/>

<br/>
</div>

<div class="doc">
  "逻辑是不可战胜的，因为反对逻辑还得使用逻辑。" By 谁说的来着?

<div class="paragraph"> </div>

  本节介绍一阶谓词逻辑 
  (说它是一阶谓词逻辑并不严格，我们在本节的最后部分讨论) 
  的 <i>'自然推理系统' (Natural Deduction System)_。
  系统，封闭之结构也;
  推理，证明之路径也;
  自然，“无他，但手熟尔”。
  这个推理系统，我们基本每天都在使用 (或者误用)。
  本节只不过是告诉你如何在 Coq 中使用这个推理系统证明定理 
  (有 Coq 盯着你，你就再也不会误用它们了)。

<div class="paragraph"> </div>

  在一阶谓词逻辑中，我们会考虑各种 <i>'命题' (Proposition)_，包括
  <i>'合取' (Conjunctive?)_ 命题、<i>'析取' (Disjunctive)_ 命题、
  <i>'否定' (Negative)_ 命题、<i>'蕴含 (Implication)'</i> 命题、
  <i>'等价' (Equivalence)_ 命题、<i>'相等性' (Equality)_ 命题、
  <i>'存在' (Existence)_ 命题 以及 <i>'全称' (Forall)_ 命题。 

<div class="paragraph"> </div>

  关于逻辑，首先需要介绍的一个概念就是 <i>'命题' (Proposition)_。
  什么是命题? 命题就是可以判断真假的语句。
  什么是语句? 语句是不含自由变量的公式。
  什么是真? 什么是假? 这个问题就深了。我不敢妄言。
  在这里，我们采用直觉的定义方式，不深究真与假的概念。
  所谓命题，就是可以判断真假的不含自由变量的公式。
  (又有学生问: 什么是变量? 什么是自由变量? 什么是公式?)
  我们之前证明过的 <span class="inlinecode"><span class="id" title="keyword">Example</span></span>、<span class="inlinecode"><span class="id" title="keyword">Lemma</span></span>、<span class="inlinecode"><span class="id" title="keyword">Theorem</span></span> 都是命题。
  如果这个定义还是让你疑惑重重，你不妨采取下面这种定义方式:
  "我不知道什么是命题，但是当我见到它的时候，我就知道了"
  ("I Know It When I See It")

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  在 Coq 中，作为一个表达式，命题也是有类型的。
  它的类型是 <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>，即 <i>'命题类型'</i>。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Check</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> + <span class="id" title="var">m</span> = <span class="id" title="var">m</span> + <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Check</span> 2 = 2.<br/>

<br/>
<span class="id" title="keyword">Check</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 2.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  <i>'是'</i>一个命题与该命题<i>'为真'</i> (或者说，<i>'可被证明' (Provable)_) 是两回事。
  后者是计算机科学与数理逻辑的重要研究对象。 

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  在 Coq 中，命题是 <i>'一等对象（First-Class Object）'</i>，
  我们可以像操作其它实体那样操作命题，比如:
<ul class="doclist">
<li> (1) 为命题命名，并在之后引用它的名字。

</li>
<li> (2) 命题可以作为函数的返回值。 

</li>
</ul>

<div class="paragraph"> </div>

 (1) 我们可以用 <span class="inlinecode"><span class="id" title="keyword">Definition</span></span> 为命题命名，并在之后引用它的名字。
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">plus_fact</span> : <span class="id" title="keyword">Prop</span> := <br/>
&nbsp;&nbsp;2 + 2 = 4.<br/>
<span class="id" title="keyword">Check</span> <span class="id" title="var">plus_fact</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">plus_fact_is_true</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">plus_fact</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  (2) 命题可以作为函数的返回值。这类函数接受某些类型的参数，返回一个命题。
  实际上，这类函数定义了其参数的某种<i>'性质' (Property)_。 

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  例如，函数 <span class="inlinecode"><span class="id" title="var">is_three</span></span> 接受自然数 <span class="inlinecode"><span class="id" title="var">n</span></span>，返回一个命题断言该数字等于 3。
  它定义了自然数的"是否等于3"的性质 (是的，这个性质很无聊)。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_three</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">n</span> = 3.<br/>
<span class="id" title="keyword">Check</span> <span class="id" title="var">is_three</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">three_is_three</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">is_three</span>(3).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">is_three</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
我们还没有介绍过 <span class="inlinecode"><span class="id" title="tactic">unfold</span></span> 证明策略。但是聪明的你应该能猜出它的含义与用法。
<div class="paragraph"> </div>


<div class="paragraph"> </div>

  函数 <span class="inlinecode"><span class="id" title="var">injective</span></span> 定义了一个函数是否是 <i>'单射函数' (Injective Functions)_。
  定义中的 "<span class="inlinecode">{<span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span>}</span>" 表示 <span class="inlinecode"><span class="id" title="var">A</span></span>、<span class="inlinecode"><span class="id" title="var">B</span></span> 是两个参数化类型，
  我们会在后续介绍，这里可以当作它们不存在。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">injective</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span> → <span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  相等关系运算符 <span class="inlinecode">=</span> 也是一个返回 <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> 的函数。
  表达式 <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span> 只是 <span class="inlinecode"><span class="id" title="var">eq</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> 的 <i>'语法糖' (Syntax Sugar?)_。

</div>
<div class="code">
<span class="id" title="keyword">Check</span> @<span class="id" title="var">eq</span>. 
<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  你可以使用 <span class="inlinecode"><span class="id" title="keyword">Print</span></span> <span class="inlinecode"><span class="id" title="var">eq</span></span> 提前偷窥一下 <span class="inlinecode"><span class="id" title="var">eq</span></span> 的定义。
  怎么样? 看不懂吧。稍安勿躁。

</div>
<div class="code">
<span class="id" title="keyword">Print</span> <span class="id" title="var">eq</span>.<br/>
</div>

<div class="doc">
<a name="lab2"></a><h1 class="section">逻辑联结词</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  TODO: 作为引子，介绍一下自然推理系统的对称性特点。

</div>
<div class="code">
</div>

<div class="doc">
<a name="lab3"></a><h2 class="section">合取</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  命题 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 表示命题 <span class="inlinecode"><span class="id" title="var">A</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span> 的<i>'合取'</i>（即<i>'逻辑与'</i>）
  <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 为真当且仅当 <span class="inlinecode"><span class="id" title="var">A</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span> 均为真。
  <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 是 <span class="inlinecode"><span class="id" title="var">and</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> 的语法糖。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Check</span> <span class="id" title="var">and</span>.<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="var">and</span>. 
<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  要证明 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">B</span></span>，只需分别证明 <span class="inlinecode"><span class="id" title="var">A</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span>。
  在 Coq 中，<span class="inlinecode"><span class="id" title="tactic">split</span></span> 策略会为目标 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 生成两个子目标 <span class="inlinecode"><span class="id" title="var">A</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span>。 

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">and_example</span> : 3 + 4 = 7 ∧ 2 × 2 = 4.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  对于任意命题 <span class="inlinecode"><span class="id" title="var">A</span></span> 和 <span class="inlinecode"><span class="id" title="var">B</span></span>，如果 <span class="inlinecode"><span class="id" title="var">A</span></span> 为真且 <span class="inlinecode"><span class="id" title="var">B</span></span> 为真，则 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 也为真。
  这个推理规则被称为 "/\-intro"。
  "intro" 表示在推导过程中 _引入_ 了 "and"。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">and_intro</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="var">A</span> ∧ <span class="id" title="var">B</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HA</span> <span class="id" title="var">HB</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">HA</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">HB</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  在上面的证明中，我们使用了一种新的证明策略 <span class="inlinecode"><span class="id" title="tactic">apply</span></span>。
  当证明目标 G 与上下文中的某个前提 H 完全相同时，
  我们就可以使用 <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> 完成证明 
  (也可以使用 <span class="inlinecode"><span class="id" title="tactic">exact</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> 或者 <span class="inlinecode"><span class="id" title="tactic">assumption</span></span>)。
  关于 <span class="inlinecode"><span class="id" title="tactic">apply</span></span> 的其余用法，我们在后续介绍。

<div class="paragraph"> </div>

<a name="lab4"></a><h4 class="section">练习：2 星, standard (and_exercise)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Example</span> <span class="id" title="var">and_exercise</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> + <span class="id" title="var">m</span> = 0 → <span class="id" title="var">n</span> = 0 ∧ <span class="id" title="var">m</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

  如果当前 _证明上下文_ 中存在形如 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 的前提 <span class="inlinecode"><span class="id" title="var">H</span></span>，
  我们可以使用 <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode">[<span class="id" title="var">HA</span></span> <span class="inlinecode"><span class="id" title="var">HB</span>]</span> 将 <span class="inlinecode"><span class="id" title="var">H</span></span> 转化为 <span class="inlinecode"><span class="id" title="var">HA</span></span> 和 <span class="inlinecode"><span class="id" title="var">HB</span></span>
  两个新的前提。这样，我们就可以单独使用 <span class="inlinecode"><span class="id" title="var">A</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span> 进行证明了。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">and_example2</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 0 ∧ <span class="id" title="var">m</span> = 0 → <span class="id" title="var">n</span> + <span class="id" title="var">m</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hn</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
你是否还记得 "intro pattern"? 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">and_example2'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 0 ∧ <span class="id" title="var">m</span> = 0 → <span class="id" title="var">n</span> + <span class="id" title="var">m</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> [<span class="id" title="var">Hn</span> <span class="id" title="var">Hm</span>]. &nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab5"></a><h4 class="section">练习：2 星, standard (and_example3)</h4>

<div class="paragraph"> </div>

  证明如下定理。你可以需要使用 <span class="inlinecode"><span class="id" title="var">and_exercise</span></span> 定理与 <span class="inlinecode"><span class="id" title="tactic">assert</span></span> 策略 
  (又忘了吧? 不要沮丧。学习就是不断重复、不断升华的过程。)。 

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">and_example3</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> + <span class="id" title="var">m</span> = 0 → <span class="id" title="var">n</span> × <span class="id" title="var">m</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

  显然，<span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 蕴含 <span class="inlinecode"><span class="id" title="var">A</span></span>，也蕴含 <span class="inlinecode"><span class="id" title="var">B</span></span>。
  接下来两个引理 (<span class="inlinecode"><span class="id" title="var">and_elim_left</span></span> 与 <span class="inlinecode"><span class="id" title="var">and_elim_right</span></span>)
  构成 "/\-elimination" 规则。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">and_elim_left</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> ∧ <span class="id" title="var">Q</span> → <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> [<span class="id" title="var">HP</span> <span class="id" title="var">HQ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HP</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab6"></a><h4 class="section">练习：1 星, standard, optional (proj2)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">and_elim_right</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> ∧ <span class="id" title="var">Q</span> → <span class="id" title="var">Q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">and</span></span> 满足交换律。
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">and_commut</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> ∧ <span class="id" title="var">Q</span> → <span class="id" title="var">Q</span> ∧ <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> [<span class="id" title="var">HP</span> <span class="id" title="var">HQ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">apply</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">apply</span> <span class="id" title="var">HP</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab7"></a><h4 class="section">练习：2 星, standard (and_assoc)</h4>

<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" title="var">and</span></span>满足结合律。请完成定理 <span class="inlinecode"><span class="id" title="var">and_assoc</span></span> 的证明。
  请注意学习 <span class="inlinecode"><span class="id" title="tactic">intros</span></span> <span class="inlinecode">[<span class="id" title="var">HP</span></span> <span class="inlinecode">[<span class="id" title="var">HQ</span></span> <span class="inlinecode"><span class="id" title="var">HR</span>]]</span> 的用法。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">and_assoc</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> ∧ (<span class="id" title="var">Q</span> ∧ <span class="id" title="var">R</span>) → (<span class="id" title="var">P</span> ∧ <span class="id" title="var">Q</span>) ∧ <span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> [<span class="id" title="var">HP</span> [<span class="id" title="var">HQ</span> <span class="id" title="var">HR</span>]].<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">
</div>

<div class="doc">
<a name="lab8"></a><h2 class="section">析取</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  命题 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∨</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 表示 <span class="inlinecode"><span class="id" title="var">A</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span> 的 <i>'析取' (即 "逻辑或")_。
  <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∨</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 为真当且仅当 <span class="inlinecode"><span class="id" title="var">A</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span> 中至少有一个为真。
  <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∨</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 是 <span class="inlinecode"><span class="id" title="var">or</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> 的语法糖。

</div>
<div class="code">
<span class="id" title="keyword">Check</span> <span class="id" title="var">or</span>. <span class="id" title="keyword">Print</span> <span class="id" title="var">or</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  要证明 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∨</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 成立，只需要证明 <span class="inlinecode"><span class="id" title="var">A</span></span> 成立或者 <span class="inlinecode"><span class="id" title="var">B</span></span> 成立。
  这就是 <span class="inlinecode">\/-<span class="id" title="tactic">intro</span>-<span class="id" title="tactic">left</span></span> 与 <span class="inlinecode">\/-<span class="id" title="tactic">intro</span>-<span class="id" title="tactic">right</span></span> 规则。
  在 Coq 中，我们可以分别使用 <span class="inlinecode"><span class="id" title="tactic">left</span></span> 与 <span class="inlinecode"><span class="id" title="tactic">right</span></span> 策略选择要证明的子目标。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">or_intro_left</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">A</span> → <span class="id" title="var">A</span> ∨ <span class="id" title="var">B</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HA</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HA</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab9"></a><h4 class="section">练习：1 星, standard (or_intro_right)</h4>

</div>
<div class="code">
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 引理 <span class="inlinecode"><span class="id" title="var">zero_or_succ</span></span> 需要同时使用 <span class="inlinecode"><span class="id" title="tactic">left</span></span> 和 <span class="inlinecode"><span class="id" title="tactic">right</span></span>。
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">zero_or_succ</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 0 ∨ <span class="id" title="var">n</span> = <span class="id" title="var">S</span> (<span class="id" title="var">pred</span> <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [ | <span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab10"></a><h4 class="section">练习：1 星, standard (mult_eq_0)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mult_eq_0</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <span class="id" title="var">n</span> × <span class="id" title="var">m</span> = 0 → <span class="id" title="var">n</span> = 0 ∨ <span class="id" title="var">m</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

  如果已知 <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">∨</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>，我们想证明目标 <span class="inlinecode"><span class="id" title="var">R</span></span>。
  我们只需证明 <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="var">R</span></span> 以及 <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="var">R</span></span>。
  这就是 "\/-elimination" 规则，类似于分情形讨论。
  是的，在 Coq 中，我们可以使用 <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> 或者 <span class="inlinecode"><span class="id" title="tactic">intros</span></span> <span class="inlinecode"><span class="id" title="tactic">pattern</span></span>
  将"已知 <span class="inlinecode"><span class="id" title="var">P</span>∨</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>，证明目标 <span class="inlinecode"><span class="id" title="var">G</span></span>" 转变成两个任务:
<ul class="doclist">
<li> 已知 <span class="inlinecode"><span class="id" title="var">P</span></span>，证明 <span class="inlinecode"><span class="id" title="var">G</span></span>

</li>
<li> 已知 <span class="inlinecode"><span class="id" title="var">Q</span></span>，证明 <span class="inlinecode"><span class="id" title="var">G</span></span>。

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">or_example</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 0 ∨ <span class="id" title="var">m</span> = 0 → <span class="id" title="var">n</span> × <span class="id" title="var">m</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> [<span class="id" title="var">Hn</span> | <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">mult_n_O</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab11"></a><h4 class="section">练习：1 星, standard (or_commut)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">or_commut</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> ∨ <span class="id" title="var">Q</span>  → <span class="id" title="var">Q</span> ∨ <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h2 class="section">假命题与否定</h2>

  很多时候，我们需要证明某个命题 <span class="inlinecode"><span class="id" title="var">A</span></span> 不成立，
  即证明 <span class="inlinecode">¬<span class="id" title="var">A</span></span> 成立。
  <span class="inlinecode">¬<span class="id" title="var">A</span></span> 是 <span class="inlinecode"><span class="id" title="var">not</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> 的语法糖。

</div>
<div class="code">
<span class="id" title="keyword">Check</span> <span class="id" title="var">not</span>. <span class="id" title="keyword">Print</span> <span class="id" title="var">not</span>. </div>

<div class="doc">
  ===&gt; not = fun A : Prop =&gt; A -&gt; False

<div class="paragraph"> </div>

  我们来解释一下这个定义。
<ul class="doclist">
<li> 首先，<span class="inlinecode"><span class="id" title="var">not</span></span> 是一个函数 <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">False</span></span>。

</li>
<li> <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">False</span></span> 是匿名函数 (没有函数名)，
    接受一个命题 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>，返回 (=&gt;) 一个命题 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">False</span></span>。

</li>
</ul>
  因此，<span class="inlinecode">¬<span class="id" title="var">A</span></span> 就是 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">False</span></span>。
  换句话说，Coq 使用 <span class="inlinecode"><span class="id" title="var">A</span></span> 能蕴含 False，来表示 <span class="inlinecode"><span class="id" title="var">A</span></span> 不成立。

<div class="paragraph"> </div>

  那么，<span class="inlinecode"><span class="id" title="var">False</span></span> 是什么呢?
  <span class="inlinecode"><span class="id" title="var">False</span></span> 是 Coq 标准库中定义的矛盾性命题。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Check</span> <span class="id" title="var">False</span>. <span class="id" title="keyword">Print</span> <span class="id" title="var">False</span>. </div>

<div class="doc">
  ===&gt; Inductive False : Prop :=

<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" title="var">False</span></span> 的定义为空。
  这意味着，你无法在 Coq 中证明它。

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  定理 <span class="inlinecode"><span class="id" title="var">ex_falso_quodlibet</span></span> (拉丁文) 描述了 <span class="inlinecode"><span class="id" title="var">False</span>-<span class="id" title="var">elimination</span></span> 规则，
  它的含义是 "从谬误出发，你能够证明任何命题。"
  (王小波关于"荒诞的年代"的那句话是怎么说的来着?)

<div class="paragraph"> </div>

  如果 <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">False</span></span> 作为前提出现在上下文中，
  那么我们就可以使用 <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> 来完成任何待证目标。 

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">ex_falso_quodlibet</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">False</span> → <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">contra</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" title="var">ex</span></span> <span class="inlinecode"><span class="id" title="var">falso</span></span> <span class="inlinecode"><span class="id" title="var">quodlibet</span></span> (缩写 EFQ) 也称为 _"Principle of Explosion"_。
  形象地讲，<span class="inlinecode"><span class="id" title="var">False</span></span> 是枚炸弹，<span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">False</span></span> 就是在拆炸弹。
  然后，Bang ……

<div class="paragraph"> </div>

  因此，一旦我们设法向上下文中引入了 <span class="inlinecode"><span class="id" title="var">False</span></span>，我们也就完成了证明。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">not_False</span> :<br/>
&nbsp;&nbsp;¬ <span class="id" title="var">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. &nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. &nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">double_neg</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> → ~~<span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">G</span>. &nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">G</span>. &nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  定理 <span class="inlinecode"><span class="id" title="var">double_neg</span></span> 的证明使用了 <span class="inlinecode"><span class="id" title="tactic">apply</span></span> 策略的另一种用法。

<div class="paragraph"> </div>

  之前，当待证明的目标 <span class="inlinecode"><span class="id" title="keyword">Goal</span></span> 与上下文中的某个前提 <span class="inlinecode"><span class="id" title="var">A</span></span> 完全一样时，
  我们使用 <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> 即可完成证明。

<div class="paragraph"> </div>

  在上面的证明中，<span class="inlinecode"><span class="id" title="var">G</span></span> 是一个蕴含式 <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">False</span></span>，
  当前待证目标 <span class="inlinecode"><span class="id" title="keyword">Goal</span></span> 是 <span class="inlinecode"><span class="id" title="keyword">Goal</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">False</span></span>。
  注意到待证目标与蕴含式 <span class="inlinecode"><span class="id" title="var">G</span></span> 中的结论相同 
  (更宽泛地讲，只需要它们可以匹配)，
  此时，<span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span> 将 <span class="inlinecode"><span class="id" title="var">G</span></span> 作用到当前待证目标上，
  其效果相当于 _逆向 (Backward)_ 使用蕴含式 <span class="inlinecode"><span class="id" title="var">G</span></span>:
  它将待证目标 <span class="inlinecode"><span class="id" title="var">False</span></span> 转化为 <span class="inlinecode"><span class="id" title="var">P</span></span>。
  背后的推理是: 要证明 <span class="inlinecode"><span class="id" title="var">False</span></span> 成立，根据前提 <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">False</span></span>，
  只需证明 <span class="inlinecode"><span class="id" title="var">P</span></span> 成立。
  这实际上是 <span class="inlinecode">-&gt;-<span class="id" title="var">elimination</span></span> 规则，也就是 <i>'modus ponens'</i> 规则。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">contradiction_implies_anything</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> ∧ ¬<span class="id" title="var">P</span>) → <span class="id" title="var">Q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> [<span class="id" title="var">HP</span> <span class="id" title="var">HNP</span>]. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HNP</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HP</span>. &nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HP</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  上面的证明使用了 <span class="inlinecode"><span class="id" title="tactic">apply</span></span> 策略的第三种用法:
  <span class="inlinecode"><span class="id" title="var">HNP</span></span> 是蕴含式 <span class="inlinecode"><span class="id" title="var">HNP</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">False</span></span>。
  <span class="inlinecode"><span class="id" title="var">HP</span></span> 是 <span class="inlinecode"><span class="id" title="var">HP</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span>。
  注意到 <span class="inlinecode"><span class="id" title="var">HP</span></span> 与 <span class="inlinecode"><span class="id" title="var">HNP</span></span> 的前件相同，
  此时，<span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">HNP</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">HP</span></span> 是在正向应用 <i>'modus ponens'</i> 规则:
  已知 <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">False</span></span> 与 <span class="inlinecode"><span class="id" title="var">P</span></span>，推导出 <span class="inlinecode"><span class="id" title="var">False</span></span>。

<div class="paragraph"> </div>

  注意: <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">I</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> 会改变 <span class="inlinecode"><span class="id" title="var">H</span></span>。
  如果不想改变 <span class="inlinecode"><span class="id" title="var">H</span></span>，可以使用 <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">I</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode">...</span> 变体。

<div class="paragraph"> </div>

<a name="lab13"></a><h4 class="section">练习：2 星, standard, optional (not_implies_our_not)</h4>

<div class="paragraph"> </div>

  了解了 <span class="inlinecode"><span class="id" title="tactic">apply</span></span> 的用法，现在你可以证明定理 
  <span class="inlinecode"><span class="id" title="var">not_implies_our_not</span></span> 了。
  它实际上指出了 <span class="inlinecode"><span class="id" title="var">not</span></span> 的另一种定义方法:
  我们可以使用 "<span class="inlinecode"><span class="id" title="var">P</span></span> 可以蕴含一切命题 (<span class="inlinecode"><span class="id" title="var">Q</span></span>)" 定义 <span class="inlinecode"><span class="id" title="var">not</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>。  

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fact</span> <span class="id" title="var">not_implies_forall_implication</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;¬ <span class="id" title="var">P</span> → (<span class="id" title="keyword">∀</span> (<span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>), <span class="id" title="var">P</span> → <span class="id" title="var">Q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fact</span> <span class="id" title="var">forall_implication_implies_not</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> (<span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>), <span class="id" title="var">P</span> → <span class="id" title="var">Q</span>) → (~ <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">PQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">PQ</span> <span class="id" title="var">False</span>). &nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HP</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab14"></a><h4 class="section">练习：2 星, standard, recommended (contrapositive)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">contrapositive</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> → <span class="id" title="var">Q</span>) → (~<span class="id" title="var">Q</span> → ¬<span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab15"></a><h4 class="section">练习：1 星, standard (not_both_true_and_false)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">not_both_true_and_false</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;¬ (<span class="id" title="var">P</span> ∧ ¬<span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

  我们用 <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">≠</span> <span class="inlinecode"><span class="id" title="var">y</span></span> 表示 (~ (x = y))。
  Notation "x &lt;&gt; y" := (~(x = y)).

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">not_true_is_false</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span> : <span class="id" title="var">bool</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">b</span> ≠ <span class="id" title="var">true</span> → <span class="id" title="var">b</span> = <span class="id" title="var">false</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] <span class="id" title="var">H</span>. &nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ex_falso_quodlibet</span>. &nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Coq 为 <span class="inlinecode"><span class="id" title="var">ex_falso_quodlibet</span></span> 提供了内建的策略 <span class="inlinecode"><span class="id" title="var">exfalso</span></span>。
</div>
<div class="code">
<span class="id" title="keyword">Print</span> <span class="id" title="var">exfalso</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">not_true_is_false'</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span> : <span class="id" title="var">bool</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">b</span> ≠ <span class="id" title="var">true</span> → <span class="id" title="var">b</span> = <span class="id" title="var">false</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. &nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
<a name="lab16"></a><h2 class="section">真值</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" title="var">True</span></span> 也是 Coq 预定义的命题，它代表真。
  我们已经知道 <span class="inlinecode"><span class="id" title="var">False</span></span> 的定义为空，那么 <span class="inlinecode"><span class="id" title="var">True</span></span> 的定义是什么呢?

</div>
<div class="code">
<span class="id" title="keyword">Check</span> <span class="id" title="var">True</span>.<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="var">True</span>.<br/>
</div>

<div class="doc">
  ===&gt; <span class="inlinecode"><span class="id" title="keyword">Inductive</span></span> <span class="inlinecode"><span class="id" title="var">True</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">I</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">True</span></span>

<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" title="var">True</span></span> 只有一种构造方式，那就是 <span class="inlinecode"><span class="id" title="var">I</span></span>。
  因此，要证明 <span class="inlinecode"><span class="id" title="var">True</span></span>，我们只需要 <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">I</span></span> 即可。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">True_is_true</span> : <span class="id" title="var">True</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">I</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  <span class="inlinecode"><span class="id" title="var">True</span></span> 作为前提不携带任何有用的信息，
  因此没有必要引入 <span class="inlinecode"><span class="id" title="var">True</span>-<span class="id" title="var">elimination</span></span> 规则。

</div>
<div class="code">
</div>

<div class="doc">
<a name="lab17"></a><h2 class="section">逻辑等价</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  命题 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">↔</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 表示 <span class="inlinecode"><span class="id" title="var">A</span></span> 成立当且仅当 <span class="inlinecode"><span class="id" title="var">B</span></span> 成立。
  <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">↔</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 是 <span class="inlinecode"><span class="id" title="var">iff</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> 的语法糖。

</div>
<div class="code">
<span class="id" title="keyword">Check</span> <span class="id" title="var">iff</span>.<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="var">iff</span>.<br/>
</div>

<div class="doc">
  ===&gt; iff = fun A B : Prop =&gt; (A -&gt; B) /\ (B -&gt; A)

<div class="paragraph"> </div>

  我们详细讲解过 <span class="inlinecode"><span class="id" title="var">not</span></span> 的定义。
  现在，你应该能独立理解 <span class="inlinecode"><span class="id" title="var">iff</span></span> 的定义了。

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  在 Coq 中，<span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">↔</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 即为 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">A</span></span> 的合取。
<ul class="doclist">
<li> 当 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">↔</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 作为前提 <span class="inlinecode"><span class="id" title="var">H</span></span> 出现在上下文中时，
    我们可以使用 <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode">[<span class="id" title="var">HAB</span></span> <span class="inlinecode"><span class="id" title="var">HBA</span>]</span> 
    将它拆成两个前提 <span class="inlinecode"><span class="id" title="var">HAB</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 与 <span class="inlinecode"><span class="id" title="var">HBA</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">A</span></span>。

</li>
<li> 当 <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">↔</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 作为目标时，
    我们可以使用 <span class="inlinecode"><span class="id" title="tactic">split</span></span> 将它拆成两个子目标
    <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">B</span></span> 与 <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">A</span></span>。

</li>
</ul>

<div class="paragraph"> </div>

  依照上述证明方法，我们可以证明 <span class="inlinecode"><span class="id" title="var">iff</span></span> 具有对称性 (定理 <span class="inlinecode"><span class="id" title="var">iff_sym</span></span>)。

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">iff_sym</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> ↔ <span class="id" title="var">Q</span>) → (<span class="id" title="var">Q</span> ↔ <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> [<span class="id" title="var">HAB</span> <span class="id" title="var">HBA</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">apply</span> <span class="id" title="var">HBA</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">apply</span> <span class="id" title="var">HAB</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab18"></a><h4 class="section">练习：1 星, standard, optional (iff_properties)</h4>

<div class="paragraph"> </div>

  请证明 <span class="inlinecode"><span class="id" title="var">iff</span></span> 具有自反性 (定理 <span class="inlinecode"><span class="id" title="var">iff_refl</span></span>) 与传递性 (iff_trans)。
  (你可能还不知道什么是自反性，什么是对称性，什么是传递性。不要紧。
  我们会在后续课程介绍。)

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">iff_refl</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> ↔ <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">iff_trans</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> ↔ <span class="id" title="var">Q</span>) → (<span class="id" title="var">Q</span> ↔ <span class="id" title="var">R</span>) → (<span class="id" title="var">P</span> ↔ <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab19"></a><h4 class="section">练习：3 星, standard (or_distributes_over_and)</h4>
 请证明如下分配律。
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">or_distributes_over_and</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> ∨ (<span class="id" title="var">Q</span> ∧ <span class="id" title="var">R</span>) ↔ (<span class="id" title="var">P</span> ∨ <span class="id" title="var">Q</span>) ∧ (<span class="id" title="var">P</span> ∨ <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

  我们之前介绍过的 <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> 和 <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> 
  不仅可以用于相等关系，还可用于 <span class="inlinecode"><span class="id" title="var">iff</span></span> 命题。
  为了开启此行为，我们需要导入库 Setoids.Setoid。

</div>
<div class="code">
<span class="id" title="var">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Setoids.Setoid</span>.<br/>

<br/>
</div>

<div class="doc">
  为了演示 <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>、<span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> 在 <span class="inlinecode"><span class="id" title="var">iff</span></span> 上的作用，
  我们先做一些准备工作。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mult_0</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <span class="id" title="var">n</span> × <span class="id" title="var">m</span> = 0 ↔ <span class="id" title="var">n</span> = 0 ∨ <span class="id" title="var">m</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">mult_eq_0</span>. &nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">or_example</span>. <span class="id" title="keyword">Qed</span>. 
<br/>
</div>

<div class="doc">
  我们将定理 <span class="inlinecode"><span class="id" title="var">or_assoc</span></span> 的证明留作练习。
  一点提示: <span class="inlinecode"><span class="id" title="tactic">intro</span></span> <span class="inlinecode">[<span class="id" title="var">HP</span></span> <span class="inlinecode">|</span> <span class="inlinecode">[<span class="id" title="var">HQ</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">HR</span>]]</span>。

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">or_assoc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> ∨ (<span class="id" title="var">Q</span> ∨ <span class="id" title="var">R</span>) ↔ (<span class="id" title="var">P</span> ∨ <span class="id" title="var">Q</span>) ∨ <span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

  现在，我们利用 <span class="inlinecode"><span class="id" title="var">mult_0</span></span> 与 <span class="inlinecode"><span class="id" title="var">or_assoc</span></span> 证明 <span class="inlinecode"><span class="id" title="var">mult_0_3</span></span>。
  注意，我们可以对 <span class="inlinecode"><span class="id" title="var">iff</span></span> 命题使用 <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> 与 <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mult_0_3</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span>, <span class="id" title="var">n</span> × <span class="id" title="var">m</span> × <span class="id" title="var">p</span> = 0 ↔ <span class="id" title="var">n</span> = 0 ∨ <span class="id" title="var">m</span> = 0 ∨ <span class="id" title="var">p</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">mult_0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">mult_0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">or_assoc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  此外，<span class="inlinecode"><span class="id" title="tactic">apply</span></span> 策略也可以用在 <span class="inlinecode">↔</span> 上。
  这时，Coq 会尝试应用正确的方向。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">apply_iff_example</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> × <span class="id" title="var">m</span> = 0 → <span class="id" title="var">n</span> = 0 ∨ <span class="id" title="var">m</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">mult_0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
<a name="lab20"></a><h2 class="section">存在量词</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  命题 <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span>,</span> <span class="inlinecode"><span class="id" title="var">P</span></span> 表示存在类型为 <span class="inlinecode"><span class="id" title="var">T</span></span> 的 <span class="inlinecode"><span class="id" title="var">x</span></span>，
  使得性质 <span class="inlinecode"><span class="id" title="var">P</span></span> 对 <span class="inlinecode"><span class="id" title="var">x</span></span> 成立 (或说，<span class="inlinecode"><span class="id" title="var">x</span></span> 满足性质 <span class="inlinecode"><span class="id" title="var">P</span></span>)。
  <span class="inlinecode"><span class="id" title="tactic">∃</span></span> 是 <i>'存在量词_。
  (如果 Coq 能从上下文中推断出 <span class="inlinecode"><span class="id" title="var">x</span></span> 的类型，那么 <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> 也可以省略。
  但并不建议初学者这么做。)

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  要证明形如 <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">x</span>,</span> <span class="inlinecode"><span class="id" title="var">P</span></span> 的命题，
  我们只需(而且"必须"; 下一节 "ConsLogic.v" 解释)
  证明 <span class="inlinecode"><span class="id" title="var">P</span></span> 对于某个特定的 <span class="inlinecode"><span class="id" title="var">x</span></span> 成立。
  我们称 <span class="inlinecode"><span class="id" title="var">x</span></span> 为 <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">x</span>,</span> <span class="inlinecode"><span class="id" title="var">P</span></span> 的例证。 
  这对应于 (逆用) "exists-intro" 规则。

<div class="paragraph"> </div>

  在 Coq 中，上述证明分为两步:
<ul class="doclist">
<li> 使用 <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span> 策略告诉 Coq 我们认为 <span class="inlinecode"><span class="id" title="var">t</span></span> 是满足要求的 <span class="inlinecode"><span class="id" title="var">x</span></span>。
    此时，证明目标变成 <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span>。

</li>
<li> 证明新目标 <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span>。

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">four_is_even</span> : <span class="id" title="tactic">∃</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, 4 = <span class="id" title="var">n</span> + <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> 2. &nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  如果形如 <span class="inlinecode"><span class="id" title="var">H</span>:</span> <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">x</span>,</span> <span class="inlinecode"><span class="id" title="var">P</span></span> 的命题作为前提出现在上下文中，
  我们可以使用 <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode">[<span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">Px</span>]</span> (或者 intros) 将它拆分成
  一个例证 <span class="inlinecode"><span class="id" title="var">x</span></span> 与 <span class="inlinecode"><span class="id" title="var">x</span></span> 满足性质 <span class="inlinecode"><span class="id" title="var">P</span></span> 的前提 <span class="inlinecode"><span class="id" title="var">Px</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span>。
  在之后的证明中，我们就可以使用 <span class="inlinecode"><span class="id" title="var">x</span></span> 与前提 <span class="inlinecode"><span class="id" title="var">Px</span></span> 了。
  这对应于 "exists-elimination" 规则。
  (新引入的前提 <span class="inlinecode"><span class="id" title="var">Px</span></span> 在使用 "exists-elimination"规则时
  会被 discharged (这个词该怎么翻译???) 掉。)

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">exists_example_2</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">∃</span> <span class="id" title="var">m</span>, <span class="id" title="var">n</span> = 4 + <span class="id" title="var">m</span>) →<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">∃</span> <span class="id" title="var">o</span>, <span class="id" title="var">n</span> = 2 + <span class="id" title="var">o</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> [<span class="id" title="var">m</span> <span class="id" title="var">Hm</span>]. &nbsp;&nbsp;<span class="id" title="tactic">∃</span> (2 + <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hm</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab21"></a><h4 class="section">练习：1 星, standard, recommended (dist_not_exists)</h4>

<div class="paragraph"> </div>

  请证明定理 <span class="inlinecode"><span class="id" title="var">dist_not_exists</span></span>:
  "<span class="inlinecode"><span class="id" title="var">P</span></span> 对所有 <span class="inlinecode"><span class="id" title="var">x</span></span> 成立" 蕴含 "不存在 <span class="inlinecode"><span class="id" title="var">x</span></span> 使得 <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> 不成立"。

<div class="paragraph"> </div>

  另外，请思考如何证明另一个方向的蕴含关系?
  在 "ConsLogic.v" 中，我们会给出答案。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">dist_not_exists</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">P</span> : <span class="id" title="var">X</span> → <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>) → ¬ (<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>, ¬ <span class="id" title="var">P</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab22"></a><h4 class="section">练习：2 星, standard (dist_exists_or)</h4>
 请证明定理 <span class="inlinecode"><span class="id" title="var">dist_exists_or</span></span>: "存在"对"析取"满足分配律。
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">dist_exists_or</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">X</span> → <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> ∨ <span class="id" title="var">Q</span> <span class="id" title="var">x</span>) ↔ (<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>) ∨ (<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>, <span class="id" title="var">Q</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">
</div>

<div class="doc">
<a name="lab23"></a><h2 class="section">全称量词</h2>

<div class="paragraph"> </div>

  命题 <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span>,</span> <span class="inlinecode"><span class="id" title="var">P</span></span> 表示对于所有的类型为 <span class="inlinecode"><span class="id" title="var">T</span></span> 的 <span class="inlinecode"><span class="id" title="var">x</span></span>，
  性质<span class="inlinecode"><span class="id" title="var">P</span></span> 都对 <span class="inlinecode"><span class="id" title="var">x</span></span> 成立 (或者说，<span class="inlinecode"><span class="id" title="var">x</span></span> 都满足性质 <span class="inlinecode"><span class="id" title="var">P</span></span>)。
  我们已经见识过很多涉及全称量词的命题与证明了。
  这里，我们从自然推理系统的角度重新审视之前使用的证明策略。

<div class="paragraph"> </div>

<a name="lab24"></a><h4 class="section">练习：3 星, standard (combine_odd_even)</h4>

  函数 <span class="inlinecode"><span class="id" title="var">combine_odd_even</span></span> 接受两个定义在自然数上的性质 
  (类型为 <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>) <span class="inlinecode"><span class="id" title="var">Podd</span></span> 与 <span class="inlinecode"><span class="id" title="var">Peven</span></span>，
  返回性质 (类型为 <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>) <span class="inlinecode"><span class="id" title="var">P</span></span>，
  使得当 <span class="inlinecode"><span class="id" title="var">n</span></span> 为奇数时 <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> 等价于 <span class="inlinecode"><span class="id" title="var">Podd</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>，否则等价于 <span class="inlinecode"><span class="id" title="var">Peven</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">combine_odd_even</span> (<span class="id" title="var">Podd</span> <span class="id" title="var">Peven</span> : <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>) : <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> ⇒ (<span class="id" title="keyword">if</span> (<span class="id" title="var">oddb</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">then</span> <span class="id" title="var">Podd</span> <span class="id" title="var">n</span> <span class="id" title="keyword">else</span> <span class="id" title="var">Peven</span> <span class="id" title="var">n</span>)).<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  请证明以下三个关于 <span class="inlinecode"><span class="id" title="var">combine_odd_even</span></span> 的定理。
  注意定理的命名 (intro, elimination)。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">combine_odd_even_intro</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">Podd</span> <span class="id" title="var">Peven</span> : <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">oddb</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span> → <span class="id" title="var">Podd</span> <span class="id" title="var">n</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">oddb</span> <span class="id" title="var">n</span> = <span class="id" title="var">false</span> → <span class="id" title="var">Peven</span> <span class="id" title="var">n</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">combine_odd_even</span> <span class="id" title="var">Podd</span> <span class="id" title="var">Peven</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">combine_odd_even_elim_odd</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">Podd</span> <span class="id" title="var">Peven</span> : <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">combine_odd_even</span> <span class="id" title="var">Podd</span> <span class="id" title="var">Peven</span> <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">oddb</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Podd</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">combine_odd_even_elim_even</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">Podd</span> <span class="id" title="var">Peven</span> : <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">combine_odd_even</span> <span class="id" title="var">Podd</span> <span class="id" title="var">Peven</span> <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">oddb</span> <span class="id" title="var">n</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Peven</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">
</div>

<div class="doc">
<a name="lab25"></a><h2 class="section">命题与布尔值</h2>

<div class="paragraph"> </div>

 我们已经知道在 Coq 中有两种编码逻辑事实的方式了，即使用<i>'布尔值'</i>
    （类型为 <span class="inlinecode"><span class="id" title="var">bool</span></span>）和<i>'命题'</i>（类型为 <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>）。

<div class="paragraph"> </div>

    例如，我们可以通过以下两种方式来断言 <span class="inlinecode"><span class="id" title="var">n</span></span> 为偶数： 
<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">evenb</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> 求值为 <span class="inlinecode"><span class="id" title="var">true</span></span>： 
</div>
<div class="code">
<span class="id" title="keyword">Example</span> <span class="id" title="var">even_42_bool</span> : <span class="id" title="var">evenb</span> 42 = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
或者存在某个 <span class="inlinecode"><span class="id" title="var">k</span></span> 使得 <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">k</span></span>： 
</div>
<div class="code">
<span class="id" title="keyword">Example</span> <span class="id" title="var">even_42_prop</span> : <span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>, 42 = <span class="id" title="var">double</span> <span class="id" title="var">k</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">∃</span> 21. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
当然，如果二者刻画的偶数性描述的不是同一个自然数集合，那么会非常奇怪！
    幸运的是，我们确实可以证明二者相同... 
<div class="paragraph"> </div>

 首先我们需要两个辅助引理。 
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">evenb_double</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">k</span>, <span class="id" title="var">evenb</span> (<span class="id" title="var">double</span> <span class="id" title="var">k</span>) = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">k</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">k'</span> <span class="id" title="var">IHk'</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHk'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab26"></a><h4 class="section">练习：3 星, standard (evenb_double_conv)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">evenb_double_conv</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>, <span class="id" title="var">n</span> = <span class="id" title="keyword">if</span> <span class="id" title="var">evenb</span> <span class="id" title="var">n</span> <span class="id" title="keyword">then</span> <span class="id" title="var">double</span> <span class="id" title="var">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">S</span> (<span class="id" title="var">double</span> <span class="id" title="var">k</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">even_bool_prop</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">evenb</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span> ↔ <span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>, <span class="id" title="var">n</span> = <span class="id" title="var">double</span> <span class="id" title="var">k</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">evenb_double_conv</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> <span class="id" title="var">Hk</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hk</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">k</span> <span class="id" title="var">Hk</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hk</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">evenb_double</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
此定理说明，逻辑命题 <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">k</span>,</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">k</span></span> 的真伪对应布尔计算 <span class="inlinecode"><span class="id" title="var">evenb</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>
    的真值。 
<div class="paragraph"> </div>

 类似地，以下两种 <span class="inlinecode"><span class="id" title="var">n</span></span> 与 <span class="inlinecode"><span class="id" title="var">m</span></span> 相等的表述等价：
<ul class="doclist">
<li> (1) <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=?</span> <span class="inlinecode"><span class="id" title="var">m</span></span> 值为 <span class="inlinecode"><span class="id" title="var">true</span></span>；

</li>
<li> (2) <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>。

</li>
</ul>
    同样，二者的记法也等价。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">eqb_eq</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> : <span class="id" title="var">nat</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">n1</span> =? <span class="id" title="var">n2</span> = <span class="id" title="var">true</span> ↔ <span class="id" title="var">n1</span> = <span class="id" title="var">n2</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">eqb_true</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eqb_refl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
然而，即便布尔值和某个断言的命题式在逻辑上是等价的，但它们在<i>'操作上'</i>
    也可能不一样。 
<div class="paragraph"> </div>

 在前面的偶数例子中，证明 <span class="inlinecode"><span class="id" title="var">even_bool_prop</span></span> 的反向部分（即
    <span class="inlinecode"><span class="id" title="var">evenb_double</span></span>，从命题到布尔表达式的方向）时，我们对
    <span class="inlinecode"><span class="id" title="var">k</span></span> 进行了简单的归纳。而反方向的证明（即练习 <span class="inlinecode"><span class="id" title="var">evenb_double_conv</span></span>）
    则需要一种聪明的一般化方法，因为我们无法直接证明
    <span class="inlinecode">(<span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">k</span>,</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">k</span>)</span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">evenb</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">true</span></span>。 
<div class="paragraph"> </div>

 对于这些例子来说，命题式的声明比与之对应的布尔表达式要更为有用，
    但并非总是如此。例如，我们无法在函数的定义中测试一般的命题是否为真，
    因此以下代码片段会被拒绝： 
</div>
<div class="code">

<br/>
<span class="id" title="var">Fail</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">is_even_prime</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">n</span> = 2 <span class="id" title="keyword">then</span> <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">false</span>.<br/>

<br/>
</div>

<div class="doc">
Coq 会抱怨 <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">2</span> 的类型是 <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>，而它想要一个 <span class="inlinecode"><span class="id" title="var">bool</span></span>
    类型的元素（或其它带有两个元素的归纳类型）。此错误信息的原因与 Coq
    核心语言的<i>'计算性'</i>特质有关，即它能表达的所有函数都是可计算且完全的。
    这样设计的的原因之一是为了能从 Coq 开发的代码中提取出可执行程序。
    因此，在 Coq 中 <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> <i>'并没有'</i>一种通用的情况分析操作来确定
    任意给定的命题是否为真，一旦存在这种操作，我们就能写出不可计算的函数。

<div class="paragraph"> </div>

    尽管一般的不可计算性质无法表述为布尔计算，但值得注意的是，很多
    <i>'可计算的'</i>性质更容易通过 <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> 而非 <span class="inlinecode"><span class="id" title="var">bool</span></span> 来表达，因为在 Coq
    中定义递归函数中会受到很大的限制。例如，下一章会展示如何用 <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>
    来定义“某个正则表达式可以匹配给定的字符串”这一性质。如果使用
    <span class="inlinecode"><span class="id" title="var">bool</span></span> 来定义，就需要写一个真正的正则表达式匹配器了，这样会更加复杂，
    更难以理解，也更难以对它进行推理。

<div class="paragraph"> </div>

    另一方面，通过布尔值来陈述事实会带来一点重要的优势，即通过对 Coq
    中的项进行计算可以实现一些自动推理，这种技术被称为<i>'互映证明（Proof
    by Reflection）'</i>。考虑以下陈述： 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">even_1000</span> : <span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>, 1000 = <span class="id" title="var">double</span> <span class="id" title="var">k</span>.<br/>

<br/>
</div>

<div class="doc">
对此命题而言，最直接的证明方式就是直接给出 <span class="inlinecode"><span class="id" title="var">k</span></span> 的值。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">∃</span> 500. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
而使用与之对应的布尔语句的证明则更加简单： 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">even_1000'</span> : <span class="id" title="var">evenb</span> 1000 = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
有趣的是，由于这两种定义是等价的，因此我们无需显式地给出 500，
    而是使用布尔等价式来证明彼此： 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">even_1000''</span> : <span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>, 1000 = <span class="id" title="var">double</span> <span class="id" title="var">k</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">even_bool_prop</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
尽管此例的证明脚本的长度并未因此而减少，然而更大的证明通常可通过
    这种互映的方式来显著化简。举一个极端的例子，在用 Coq 证明著名的
    <i>'四色定理'</i>时，人们使用互映技巧将几百种不同的情况归约成了一个布尔计算。 
<div class="paragraph"> </div>

 另一点明显的不同是“布尔事实”的否定可以被直白地陈述并证明，
    只需翻转预期的布尔值结果即可。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">not_even_1001</span> : <span class="id" title="var">evenb</span> 1001 = <span class="id" title="var">false</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
相反，命题的否定形式可能更难以掌握。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">not_even_1001'</span> : ~(<span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>, 1001 = <span class="id" title="var">double</span> <span class="id" title="var">k</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">even_bool_prop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
相等性补充了另一个例子。在涉及 <span class="inlinecode"><span class="id" title="var">n</span></span> 和 <span class="inlinecode"><span class="id" title="var">m</span></span> 的证明中，知道 <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=?</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">true</span></span>
    通常没什么直接的帮助。然而如果我们将该语句转换为等价的 <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span> 形式，
    则可利用该等式改写证明目标。
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">plus_eqb_example</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <span class="id" title="var">nat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> =? <span class="id" title="var">m</span> = <span class="id" title="var">true</span> → <span class="id" title="var">n</span> + <span class="id" title="var">p</span> =? <span class="id" title="var">m</span> + <span class="id" title="var">p</span> = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqb_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqb_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
我们不会详细地介绍互映技巧，然而对于展示布尔计算与一般命题的互补优势而言，
    它是个很好的例子。 
<div class="paragraph"> </div>

<a name="lab27"></a><h4 class="section">练习：2 星, standard (logical_connectives)</h4>


<div class="paragraph"> </div>

    以下引理将本章中讨论的命题联结词与对应的布尔操作关联了起来。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">andb_true_iff</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>:<span class="id" title="var">bool</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">b1</span> &amp;&amp; <span class="id" title="var">b2</span> = <span class="id" title="var">true</span> ↔ <span class="id" title="var">b1</span> = <span class="id" title="var">true</span> ∧ <span class="id" title="var">b2</span> = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">orb_true_iff</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> = <span class="id" title="var">true</span> ↔ <span class="id" title="var">b1</span> = <span class="id" title="var">true</span> ∨ <span class="id" title="var">b2</span> = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab28"></a><h4 class="section">练习：1 星, standard (eqb_neq)</h4>


<div class="paragraph"> </div>

    以下定理为等价式 <span class="inlinecode"><span class="id" title="var">eqb_eq</span></span> 的“否定”版本，
    在某些场景中使用它会更方便些（后面的章节中会讲到这方面的例子）。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">eqb_neq</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">nat</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> =? <span class="id" title="var">y</span> = <span class="id" title="var">false</span> ↔ <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>